
(function(k,e){k.dnnModal={load:function(){try{if(void 0!==parent.location.href){var a=parent;if("undefined"!=typeof a.parent.$find)if(-1==location.href.indexOf("popUp")||-1<a.location.href.indexOf("popUp")){var c=a.jQuery("#iPopUp"),d=c.dialog("option","refresh"),e=c.dialog("option","closingUrl"),g=c.dialog("option","minWidth"),h=c.dialog("option","minHeight"),b=c.dialog("option","showReturn");e||(e=location.href);!0===c.dialog("isOpen")&&c.dialog("option",{close:function(a,c){dnnModal.refreshPopup({url:e,width:g,height:h,showReturn:b,refresh:d})}}).dialog("close")}else a.jQuery("#iPopUp").dialog({autoOpen:!1,title:document.title})}return!0}catch(l){return!1}},show:function(a,c,d,f,g,h){var b=e("#iPopUp");0==b.length?(b=e('<iframe id="iPopUp" src="about:blank" scrolling="auto" frameborder="0"></iframe>'),e(document.body).append(b)):b.attr("src","about:blank");e(document).find("html").css("overflow","hidden");b.dialog({modal:!0,autoOpen:!0,dialogClass:"dnnFormPopup",position:"center",minWidth:f,minHeight:d,maxWidth:1920,maxHeight:1080,resizable:!0,closeOnEscape:!0,refresh:g,showReturn:c,closingUrl:h,close:function(b,a){dnnModal.closePopUp(g,h)}}).width(f-11).height(d-11);0===b.parent().find(".ui-dialog-title").next("a.dnnModalCtrl").length&&(d=e('<a class="dnnModalCtrl"></a>'),b.parent().find(".ui-dialog-titlebar-close").wrap(d),d=e('<a href="#" class="dnnToggleMax"><span>Max</span></a>'),b.parent().find(".ui-dialog-titlebar-close").before(d),d.click(function(a){a.preventDefault();var c=e(k);b.data("isMaximized")?(a=b.data("height"),c=b.data("width"),b.data("isMaximized",!1)):(b.data("height",b.dialog("option","minHeight")).data("width",b.dialog("option","minWidth")).data("position",b.dialog("option","position")),a=c.height()-46,c=c.width()-40,b.data("isMaximized",!0));b.dialog({height:a,width:c});b.dialog({position:"center"})}));(function(){var a=e('<div class="dnnLoading"></div>');a.css({width:b.width(),height:b.height()});b.before(a)})();b[0].src=a;b.bind("load",function(){b.prev(".dnnLoading").remove()});if("true"==c.toString())return!1},closePopUp:function(a,c){var d=parent,f=d.jQuery("#iPopUp");if("undefined"===typeof a||null==a)a=!0;if("true"==a.toString()){if("undefined"===typeof c||""==c)c=d.location.href;d.location.href=c;f.hide()}else f.dialog("option","close",null).dialog("close");e(d.document).find("html").css("overflow","")},refreshPopup:function(a){var c=parent,d=c.parent;c.location.href!==d.location.href&&c.location.href!==a.url?d.dnnModal.show(a.url,a.showReturn,a.height,a.width,a.refresh,a.closingUrl):dnnModal.closePopUp(a.refresh,a.url)}};k.dnnModal.load()})(window,jQuery);
;;;
(function($){$.fn.hoverIntent=function(f,g){var cfg={sensitivity:7,interval:100,timeout:0};cfg=$.extend(cfg,g?{over:f,out:g}:f);var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if((Math.abs(pX-cX)+Math.abs(pY-cY))<cfg.sensitivity){$(ob).unbind("mousemove",track);ob.hoverIntent_s=1;return cfg.over.apply(ob,[ev])}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval)}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=0;return cfg.out.apply(ob,[ev])};var handleHover=function(e){var ev=jQuery.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t)}if(e.type=="mouseenter"){pX=ev.pageX;pY=ev.pageY;$(ob).bind("mousemove",track);if(ob.hoverIntent_s!=1){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval)}}else{$(ob).unbind("mousemove",track);if(ob.hoverIntent_s==1){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob)},cfg.timeout)}}};return this.bind('mouseenter',handleHover).bind('mouseleave',handleHover)}})(jQuery);
;;;
(function($){if(typeof dnn=='undefined')window.dnn={};if(typeof dnn.searchSkinObject=='undefined'){dnn.searchSkinObject=function(options){var settings={delayTriggerAutoSearch:100,minCharRequiredTriggerAutoSearch:2,searchType:'S',enableWildSearch:true,cultureCode:'en-US'};this.settings=$.extend({},settings,options);};dnn.searchSkinObject.prototype={_ignoreKeyCodes:[9,13,16,17,18,19,20,27,33,34,35,36,37,38,39,40,45],init:function(){var throttle=null,self=this;var makeUrl=function(val,service){var url=service?service.getServiceRoot('internalservices')+'searchService/preview':null;if(!url)return null;var params={};params['keywords']=val.replace(/^\s+|\s+$/g,'');if(!self.settings.enableWildSearch)params["forceWild"]="0";params['culture']=self.settings.cultureCode;if(self.settings.portalId>=0)
params['portal']=self.settings.portalId;var urlAppend=[];$.each(params,function(index,value){urlAppend.push([index,encodeURIComponent(value)].join('='));});if(urlAppend.length){url +=url.indexOf('?')===-1?'?':'&';url +=urlAppend.join('&');}
return url;};var generatePreviewTemplate=function(data){var $wrap=$('.searchInputContainer');var preview=$('.searchSkinObjectPreview',$wrap);if(preview.length)
preview.remove();var markup='<ul class="searchSkinObjectPreview">';if(data&&data.length){for(var i=0;i<data.length;i++){var group=data[i];if(group.Results&&group.Results.length){var groupTitle=group.DocumentTypeName;markup +='<li class="searchSkinObjectPreview_group">'+ groupTitle +'</li>';for(var j=0;j<group.Results.length;j++){var item=group.Results[j];var itemTitle=item.Title;var itemUrl=item.DocumentUrl;var itemSnippet=item.Snippet;markup +='<li data-url="'+ itemUrl +'"><span>'+ itemTitle +'</span>';if(itemSnippet)
markup +='<p>'+ itemSnippet +'</p></li>';else
markup +='</li>';}}}
var moreResults=$wrap.attr('data-moreresults');markup +='<li><a href="javascript:void(0)" class="searchSkinObjectPreview_more">'+ moreResults +'</a></li>';markup +='</ul>';}
else{var noResult=$wrap.attr('data-noresult');markup +='<li>'+ noResult +'</li></ul>';}
$wrap.append(markup);preview=$('.searchSkinObjectPreview',$wrap);$('li',preview).on('click',function(){var navigateUrl=$(this).attr('data-url');if(navigateUrl){window.location.href=navigateUrl;}
return false;});$('.searchSkinObjectPreview_more',$wrap).on('click',function(){var href=$wrap.next().attr('href');var code=href.replace('javascript:','');eval(code);return false;});};$('.searchInputContainer a.dnnSearchBoxClearText').on('click',function(){var $this=$(this);var $wrap=$this.parent();$('.searchInputContainer input').val('').focus();$this.removeClass('dnnShow');$('.searchSkinObjectPreview',$wrap).remove();return false;});$('.searchInputContainer').next().on('click',function(){var $this=$(this);var inputBox=$this.prev().find('input[type="text"]');var val=inputBox.val();if(val.length){return true;}
return false;});$('.searchInputContainer input').on('keyup',function(e){var k=e.keyCode||e.witch;if(self._ignoreKeyCodes.indexOf(k)>-1)return;var $this=$(this);var $wrap=$this.parent();var val=$this.val();if(!val){$('a.dnnSearchBoxClearText',$wrap).removeClass('dnnShow');$('.searchSkinObjectPreview',$wrap).remove();}else{$('a.dnnSearchBoxClearText',$wrap).addClass('dnnShow');if(self.settings.searchType!='S'||val.length<self.settings.minCharRequiredTriggerAutoSearch)return;if(throttle){clearTimeout(throttle);delete throttle;}
throttle=setTimeout(function(){var service=$.dnnSF?$.dnnSF(-1):null;var url=makeUrl(val,service);if(url){$.ajax({url:url,beforeSend:service?service.setModuleHeaders:null,success:function(result){if(result)
generatePreviewTemplate(result);},error:function(){},type:'GET',dataType:'json',contentType:"application/json"});}},self.settings.delayTriggerAutoSearch);}}).on('paste',function(){$(this).triggerHandler('keyup');}).on('keypress',function(e){var k=e.keyCode||e.which;if(k==13){var $this=$(this);var $wrap=$this.parent();var val=$this.val();if(val.length){var href=$wrap.next().attr('href');if(!href){href=$wrap.parent().next().attr('href');}
var code=href.replace('javascript:','');eval(code);e.preventDefault();}else{e.preventDefault();}}});}};}})(jQuery);
;;;
(function($){$.dnnSF=function(moduleId){var base=this;base.getServiceRoot=function(moduleName){var serviceRoot=dnn.getVar("sf_siteRoot","/");serviceRoot +="DesktopModules/"+ moduleName +"/API/";return serviceRoot;};base.getTabId=function(){return dnn.getVar("sf_tabId",-1);};base.getModuleId=function(){return moduleId;};base.setModuleHeaders=function(xhr){var tabId=base.getTabId();if(tabId>-1){xhr.setRequestHeader("ModuleId",base.getModuleId());xhr.setRequestHeader("TabId",tabId);}var afValue=base.getAntiForgeryValue();if(afValue){xhr.setRequestHeader("RequestVerificationToken",afValue);}};base.getAntiForgeryKey=function(){return"__RequestVerificationToken";};base.getAntiForgeryValue=function(){return $('[name="__RequestVerificationToken"]').val();};return base;};$.ServicesFramework=function(moduleId){return new $.dnnSF(moduleId);};})(jQuery);
;;;
(function($){$.fn.dnnTabs=function(options){var opts=$.extend({},$.fn.dnnTabs.defaultOptions,options),$wrap=this;$.ui.tabs.prototype._sanitizeSelector=function(hash){return hash.replace(/:/g,"\\:").replace(/\./g,"\\\.");};$wrap.each(function(){var showEvent,cookieId;if(this.id){cookieId='dnnTabs-'+ this.id;if(opts.selected===-1){var cookieValue=dnn.dom.getCookie(cookieId);if(cookieValue){opts.selected=cookieValue;}
if(opts.selected===-1){opts.selected=0;}}
showEvent=(function(cid){return function(event,ui){dnn.dom.setCookie(cid,ui.newTab.index(),opts.cookieDays,'/','',false,opts.cookieMilleseconds);};})(cookieId);}else{showEvent=function(){};}
$wrap.tabs({activate:showEvent,active:opts.selected,disabled:opts.disabled,fx:{opacity:opts.opacity,duration:opts.duration}});if(window.location.hash){$('a[href="'+ window.location.hash +'"]',$wrap).trigger('click');}
if(typeof window.Page_ClientValidate!="undefined"&&$.isFunction(window.Page_ClientValidate)){$wrap.find(opts.validationTriggerSelector).click(function(){if(!window.Page_ClientValidate(opts.validationGroup)){var invalidControl=$wrap.find(opts.invalidItemSelector).eq(0);var $parent=invalidControl.closest(".ui-tabs-panel");if($parent.length>0){var tabId=$parent.attr("id");$parent.parent().find("a[href='#"+ tabId +"']").click();}}});};});return $wrap;};$.fn.dnnTabs.defaultOptions={opacity:'toggle',duration:'fast',validationTriggerSelector:'.dnnPrimaryAction',validationGroup:'',invalidItemSelector:'.dnnFormError[style*="inline"]',regionToToggleSelector:'fieldset',selected:-1,cookieDays:0,cookieMilleseconds:120000};})(jQuery);(function($){$.fn.dnnConfirm=function(options){var opts=$.extend({},$.fn.dnnConfirm.defaultOptions,options),$wrap=this;$wrap.each(function(){var $this=$(this),defaultAction=$this.attr('href'),$dnnDialog;if(defaultAction||opts.isButton){$dnnDialog=$("<div class='dnnDialog'></div>").html(opts.text).dialog(opts);$this.click(function(e,isTrigger){if(isTrigger){return true;}
if($dnnDialog.is(':visible')){$dnnDialog.dialog("close");return true;}
$dnnDialog.dialog({open:function(){$('.ui-dialog-buttonpane').find('button:contains("'+ opts.noText +'")').addClass('dnnConfirmCancel');},position:'center',buttons:[{text:opts.yesText,click:function(){$dnnDialog.dialog("close");if($.isFunction(opts.callbackTrue)){opts.callbackTrue.call(this);}
else{if(opts.isButton){$this.trigger("click",[true]);}
else{window.location.href=defaultAction;}}},'class':opts.buttonYesClass},{text:opts.noText,click:function(){$(this).dialog("close");if($.isFunction(opts.callbackFalse)){opts.callbackFalse.call(this);};},'class':opts.buttonNoClass}]});$dnnDialog.dialog('open');e.preventDefault();return false;});}});return $wrap;};$.fn.dnnConfirm.defaultOptions={text:'Are you sure?',yesText:'Yes',noText:'No',buttonYesClass:'dnnPrimaryAction',buttonNoClass:'dnnSecondaryAction',actionUrl:window.location.href,autoOpen:false,resizable:false,modal:true,title:'Confirm',dialogClass:'dnnFormPopup dnnClear',isButton:false};})(jQuery);(function($){$.dnnAlert=function(options){var opts=$.extend({},$.dnnAlert.defaultOptions,options),$dnnDialog=$("<div class='dnnDialog'></div>").html(opts.text).dialog(opts);$dnnDialog.dialog({buttons:[{text:opts.okText,"class":opts.buttonOkClass,click:function(){$(this).dialog("close");if($.isFunction(opts.callback)){opts.callback.call(this);};return false;}}]});$dnnDialog.dialog('open');};$.dnnAlert.defaultOptions={okText:'Ok',autoOpen:false,resizable:false,modal:true,buttonOkClass:'dnnPrimaryAction',dialogClass:'dnnFormPopup dnnClear'};})(jQuery);(function($){$.fn.dnnPanels=function(options){var opts=$.extend({},$.fn.dnnPanels.defaultOptions,options),$wrap=this;$wrap.each(function(){var $this=$(this);if(typeof(opts.onExpand)==="function"){$this.bind('onExpand',opts.onExpand);}
if(typeof(opts.onHide)==="function"){$this.bind('onHide',opts.onHide);}
$this.find(opts.clickToToggleSelector).click(function(e){var toggle=$(this).toggleClass(opts.toggleClass).parent().next(opts.regionToToggleSelector).slideToggle(function(){var id=$(toggle.context.parentNode).attr("id");var cookieId=id?id.replace(/[^a-zA-Z0-9\-]+/g,""):'';var visible=$(this).is(':visible');if(cookieId){dnn.dom.setCookie(cookieId,visible,opts.cookieDays,'/','',false,opts.cookieMilleseconds);}
if(visible){$(this).trigger("onExpand");}
else{$(this).trigger("onHide");}});e.preventDefault();e.stopImmediatePropagation();return false;});function collapsePanel($clicker,$region){$clicker.removeClass(opts.toggleClass);$region.hide();$this.trigger("onHide");}
function expandPanel($clicker,$region){$clicker.addClass(opts.toggleClass);$region.show();$this.trigger("onExpand");}
$this.find(opts.sectionHeadSelector).each(function(indexInArray,valueOfElement){var $self=$(valueOfElement),elementId=$self.attr("id"),cookieId=elementId?elementId.replace(/[^a-zA-Z0-9\-]+/g,""):'',cookieValue=cookieId?dnn.dom.getCookie(cookieId):'',$clicker=$self.find(opts.clickToToggleIsolatedSelector),$region=$self.next(opts.regionToToggleSelector),$parentSeparator=$self.parents(opts.panelSeparatorSelector),groupPanelIndex=$parentSeparator.find(opts.sectionHeadSelector).index($self);if(cookieValue=="false"){collapsePanel($clicker,$region);}
else if(cookieValue=="true"||indexInArray===0){expandPanel($clicker,$region);}
else if($parentSeparator.size()>0&&groupPanelIndex===0){expandPanel($clicker,$region);}
else{collapsePanel($clicker,$region);}});$this.find(opts.validationTriggerSelector).click(function(){if(typeof window.Page_ClientValidate!="undefined"&&$.isFunction(window.Page_ClientValidate)){if(!window.Page_ClientValidate(opts.validationGroup)){$this.find(opts.invalidItemSelector).each(function(){var $parent=$(this).closest(opts.regionToToggleSelector);if($parent.is(':hidden')){$parent.prev(opts.sectionHeadSelector).find(opts.clickToToggleIsolatedSelector).click();}});}}});});return $wrap;};$.fn.dnnPanels.defaultOptions={clickToToggleSelector:'h2.dnnFormSectionHead a',sectionHeadSelector:'.dnnFormSectionHead',regionToToggleSelector:'fieldset',toggleClass:'dnnSectionExpanded',clickToToggleIsolatedSelector:'a',validationTriggerSelector:'.dnnPrimaryAction',invalidItemSelector:'.dnnFormError[style*="inline"]',validationGroup:'',panelSeparatorSelector:'.ui-tabs-panel',cookieDays:0,cookieMilleseconds:120000};})(jQuery);(function($){$.fn.dnnPreview=function(options){var opts=$.extend({},$.fn.dnnPreview.defaultOptions,options),$wrap=this;$wrap.each(function(){var $this=$(this);$this.find(opts.linkSelector).click(function(e){e.preventDefault();var params="?";var skin,container;if(opts.useComboBox){var skinComboBox=$find(opts.skinSelector);var containerComboBox=$find(opts.containerSelector);skin=skinComboBox?skinComboBox.get_value():'';container=containerComboBox?containerComboBox.get_value():'';}
else{skin=$this.find(opts.skinSelector).val();container=$this.find(opts.containerSelector).val();}
if(skin){params +="SkinSrc="+ skin;}
if(container){if(skin){params +="&";}
params +="ContainerSrc="+ container;}
if(params!="?"){window.open(encodeURI(opts.baseUrl + params.replace(/.ascx/gi,'')),"skinpreview");}
else{$.dnnAlert({text:opts.noSelectionMessage,okText:opts.alertOkText,closeText:opts.alertCloseText});}});});return $wrap;};$.fn.dnnPreview.defaultOptions={baseUrl:window.location.protocol +"//"+ window.location.host + window.location.pathname,linkSelector:'a.dnnSecondaryAction',skinSelector:'',containerSelector:'',noSelectionMessage:'Please select a preview option.',alertOkText:'Ok',alertCloseText:'close',useComboBox:false};})(jQuery);(function($){$.fn.dnnExpandAll=function(options){var opts=$.extend({},$.fn.dnnExpandAll.defaultOptions,options),$elem=this;if(($(opts.targetArea).find(opts.targetSelector +':visible').length===$(opts.targetArea).find(opts.targetSelector + opts.targetExpandedSelector +':visible').length)&&!$(this).hasClass('expanded')){$(this).addClass('expanded').text(opts.collapseText);}
$elem.click(function(e){e.preventDefault();var $this=$(this);if($this.hasClass('expanded')){$this.removeClass('expanded').text(opts.expandText);$(opts.targetArea).find(opts.targetSelector + opts.targetExpandedSelector +':visible').click();}
else{$this.addClass('expanded').text(opts.collapseText);$(opts.targetArea).find(opts.targetSelector +':visible').not(opts.targetExpandedSelector).click();}
e.stopImmediatePropagation();});return $elem;};$.fn.dnnExpandAll.defaultOptions={expandText:'Expand All',collapseText:'Collapse All',targetArea:'#dnnHostSettings',targetSelector:'h2.dnnFormSectionHead a',targetExpandedSelector:'.dnnSectionExpanded'};})(jQuery);(function($){$.fn.dnnTooltip=function(options){var opts=$.extend({},$.fn.dnnTooltip.defaultOptions,options),$wrap=this;$wrap.each(function(){var $this=$(this),dnnFormHelp=$this.prev();if($this.data('initialized'))return;dnnFormHelp.on('click',function(e){e.preventDefault();});var helpSelector=$this.find(opts.helpSelector);$this.parent().css({position:'relative'});$this.css({position:'absolute',right:'-29%'});var hoverOnToolTip=false,hoverOnPd=false;dnnFormHelp.hoverIntent({over:function(){hoverOnPd=true;var tooltipHeight=helpSelector.height();var top=-(tooltipHeight + 30);helpSelector.parent().css({top:top +'px'});helpSelector.css('visibility','visible');},out:function(){hoverOnPd=false;if(!$this.hasClass(opts.pinnedClass)&&!hoverOnToolTip){helpSelector.css('visibility','hidden');}},timeout:200,interval:200});helpSelector.hover(function(){hoverOnToolTip=true;},function(){hoverOnToolTip=false;if(!$this.hasClass(opts.pinnedClass)&&!hoverOnPd){helpSelector.css('visibility','hidden');}});var pinHelper=helpSelector.find(opts.pinSelector);pinHelper.on('click',function(e){e.preventDefault();if($this.hasClass(opts.pinnedClass)){helpSelector.css({"left":'0',"top":'0'}).css('visibility','hidden').draggable('destroy');$this.removeClass(opts.pinnedClass);}
else{$this.addClass(opts.pinnedClass);if($.isFunction($().draggable)){helpSelector.draggable();}}});$this.data('initialized',1);});return $wrap;};$.fn.dnnTooltip.defaultOptions={pinSelector:'a.pinHelp',helpSelector:'.dnnFormHelpContent',pinnedClass:'dnnTooltipPinned'};})(jQuery);(function($){var cb=function(e){if(!e)e=window.event;e.cancelBubble=true;if(e.stopPropagation)e.stopPropagation();};$.fn.dnnCheckbox=function(options){var settings={cls:'dnnCheckbox'};settings=$.extend(settings,options||{});var addEvents=function(object){var checked=object.checked,disabled=object.disabled,$object=$(object);if(object.stateInterval)
clearInterval(object.stateInterval);object.stateInterval=setInterval(function(){if(object.disabled!=disabled)
$object.trigger((disabled=!!object.disabled)?'disable':'enable');if(object.checked!=checked)
$object.trigger((checked=!!object.checked)?'check':'uncheck');},10);return $object;};return this.each(function(){var ch=this;if($(ch).data("checkBoxWrapped")){return;}
$(ch).data("checkBoxWrapped",true);if($(this).hasClass('normalCheckBox')||$(this).hasClass('normalRadioButton'))return;var parentCheckBoxHolder=$(this).closest('.normalCheckBox');var parentRadioButtonHolder=$(this).closest('.normalRadioButton');if(parentCheckBoxHolder.length||parentRadioButtonHolder.length)return;var $ch=addEvents(ch);if(ch.wrapper)ch.wrapper.remove();ch.wrapper=$('<span class="'+ settings.cls +'"><span class="mark"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRFAAAAAAAApWe5zwAAAAF0Uk5TAEDm2GYAAAAMSURBVHjaYmAACDAAAAIAAU9tWeEAAAAASUVORK5CYII=" /></span></span>');ch.wrapperInner=ch.wrapper.children('span:eq(0)');ch.wrapper.hover(function(e){ch.wrapperInner.addClass(settings.cls +'-hover');cb(e);},function(e){ch.wrapperInner.removeClass(settings.cls +'-hover');cb(e);});$ch.css({position:'absolute',zIndex:-1,visibility:'hidden'}).after(ch.wrapper);var label,parentLabel=false;label=$ch.closest('label');if(!label.length)
label=false;else
parentLabel=true;if(!label&&$ch.attr('id')){label=$('label[for="'+ $ch.attr('id')+'"]');if(!label.length)label=false;}
if(label){label.css('display','inline-block');if(!parentLabel){label.click(function(e){$ch.triggerHandler('focus');ch.click();$ch.trigger('change',[e]);cb(e);return false;});}
else{label.children().each(function(){var $this=$(this);if($this.is('input'))return;$this.click(function(e){$ch.triggerHandler('focus');ch.click();$ch.trigger('change',[e]);cb(e);return false;});});}}
if(!parentLabel){ch.wrapper.click(function(e){$ch.triggerHandler('focus');ch.click();$ch.trigger('change',[e]);cb(e);return false;});}
$ch.bind('disable',function(){ch.wrapperInner.addClass(settings.cls +'-disabled');}).bind('enable',function(){ch.wrapperInner.removeClass(settings.cls +'-disabled');});$ch.bind('check',function(){ch.wrapper.addClass(settings.cls +'-checked');}).bind('uncheck',function(){ch.wrapper.removeClass(settings.cls +'-checked');});if(ch.checked)
ch.wrapper.addClass(settings.cls +'-checked');if(ch.disabled)
ch.wrapperInner.addClass(settings.cls +'-disabled');});};$.fn.dnnHelperTipDestroy=function(){return this.each(function(){var pd=this;if(pd.id){$('div[data-tipholder="'+ pd.id +'"]').remove();}});};$.fn.dnnHelperTip=function(options){var settings={cls:'dnnHelperTip',helpContent:"This is hover helper tooltip",holderId:'',show:false};settings=$.extend(settings,options||{});return this.each(function(){var pd=this,$pd=$(this);if(pd.tooltipWrapper)pd.tooltipWrapper.remove();pd.tooltipWrapper=$('<div class="'+ settings.cls +'" data-tipholder="'+ settings.holderId +'"> <div class="dnnFormHelpContent dnnClear"><span class="dnnHelpText">'+ settings.helpContent +'</span></div></div>');$('body').append(pd.tooltipWrapper);pd.tooltipWrapper.css({position:'absolute'});pd.tooltipWrapperInner=$('.dnnFormHelpContent',pd.tooltipWrapper);var tooltipHeight=pd.tooltipWrapperInner.height();pd.tooltipWrapperInner.css({left:'-10px',top:-(tooltipHeight + 30)+'px'});var hoverOnPd=false;$pd.hover(function(){hoverOnPd=true;setTimeout(function(){if(hoverOnPd)
pd.tooltipWrapperInner.css('visibility','visible');},400);},function(){hoverOnPd=false;setTimeout(function(){if(!hoverOnPd)
pd.tooltipWrapperInner.css('visibility','hidden');},400);});if(settings.show){hoverOnPd=true;setTimeout(function(){pd.tooltipWrapperInner.css('visibility','visible');},400);}
$pd.bind('mousemove',function(e){var x=e.pageX;var y=e.pageY;var pos=$('body').css('position');if(pos=='relative')y-=38;pd.tooltipWrapper.css({left:x +'px',top:y +'px','z-index':'99999'});});});};$.fn.dnnProgressbar=function(){var $pd=$(this),pd=this;if(pd.tooltipWrapper)pd.tooltipWrapper.remove();pd.tooltipWrapper=$('<div class="dnnTooltip"> <div class="dnnFormHelpContent dnnClear"><span class="dnnHelpText"></span></div></div>').insertAfter($pd);pd.tooltipWrapperInner=$('.dnnFormHelpContent',pd.tooltipWrapper);pd.tooltipWrapperInner.css({width:'32px',padding:'7px'});$pd.parent().css({position:'relative'});var hoverOnToolTip=false,hoverOnPd=false;$pd.hoverIntent({over:function(){hoverOnPd=true;var val=$(this).children(':first').progressbar('value');pd.update(val);pd.tooltipWrapperInner.css('visibility','visible');},out:function(){hoverOnPd=false;if(!hoverOnToolTip){pd.tooltipWrapperInner.css('visibility','hidden');}},timeout:200,interval:200});pd.tooltipWrapperInner.hover(function(){hoverOnToolTip=true;},function(){hoverOnToolTip=false;if(!hoverOnPd){pd.tooltipWrapperInner.hide();}});pd.update=function(value){pd.tooltipWrapperInner.find('span').html(value +' %');var pdTop=$pd.position().top,tooltipHeight=pd.tooltipWrapperInner.height();pdTop-=(tooltipHeight + 10);var pdLeft=value>50?(value-4)+'%':value>0?(value-2)+'%':'10px';pd.tooltipWrapper.css({position:'absolute',left:pdLeft,top:pdTop +'px'});};return this;};$.fn.dnnSpinner=function(options){var opt=$.extend({type:'range',typedata:'',width:'150px',looping:false},options);var otypedata;if(options!=null&&options.typedata!=null){otypedata=$.extend({min:1,max:10,interval:1,decimalplaces:0},options.typedata);}
else{otypedata=$.extend({min:1,max:10,interval:1,decimalplaces:0});}
opt.typedata=otypedata;var inputControl=this;if(!inputControl.is(':text'))
return inputControl;if(inputControl.hasClass('dnnSpinnerInput')){return inputControl;}
else{inputControl.addClass('dnnSpinnerInput');}
var strContainerDiv='';strContainerDiv +='<div class="dnnSpinner">';strContainerDiv +='<div class="dnnSpinnerDisplay"></div>';strContainerDiv +='<div class="dnnSpinnerCtrl">';strContainerDiv +='<a class="dnnSpinnerTopButton"></a>';strContainerDiv +='<a class="dnnSpinnerBotButton"></a>';strContainerDiv +='</div></div>';var objContainerDiv=$(strContainerDiv).insertAfter(inputControl);inputControl.insertAfter($("div.dnnSpinnerDisplay",objContainerDiv));$("div.dnnSpinnerDisplay",objContainerDiv).click(function(){if(opt.type=='range'){var displayCtrl=$(this);var innerInput=$('input[type="text"]',displayCtrl);if(innerInput.length<1){var originalVal=displayCtrl.html();innerInput=$('<input type="text" />').val(originalVal);displayCtrl.html(innerInput);innerInput.blur(function(){var newVal=$(this).val();if(newVal>opt.typedata.max){newVal=opt.typedata.max;}
if(newVal<opt.typedata.min){newVal=opt.typedata.min;}
$(this).remove();selectedValue=parseInt(newVal);inputControl.val(newVal);displayCtrl.html(newVal);}).keypress(function(e){var regex=new RegExp("^[0-9]+$");var key=String.fromCharCode(!e.charCode?e.which:e.charCode);if(!regex.test(key)){event.preventDefault();return false;}
return true;});}
innerInput.focus();}
inputControl.triggerHandler('focus');});inputControl.css('display','none');switch(opt.type){case'range':if(opt.defaultVal<opt.typedata.min||opt.defaultVal>opt.typedata.max){opt.defaultVal=opt.typedata.min;}
if(opt.defaultVal%opt.typedata.interval>0){opt.defaultVal=parseInt((opt.defaultVal/opt.typedata.interval).toFixed(0))*opt.typedata.interval;}
inputControl.val(opt.defaultVal.toFixed(opt.typedata.decimalplaces));($("div.dnnSpinnerDisplay",objContainerDiv)).html(opt.defaultVal.toFixed(opt.typedata.decimalplaces));var selectedValue=opt.defaultVal;if((opt.typedata.max-opt.typedata.min)>opt.typedata.interval){$("a.dnnSpinnerTopButton",objContainerDiv).click(function(){if((selectedValue + opt.typedata.interval)<=opt.typedata.max||opt.looping){if((selectedValue + opt.typedata.interval)>opt.typedata.max){selectedValue=opt.typedata.min-opt.typedata.interval;}
var valueData=(selectedValue + opt.typedata.interval).toFixed(opt.typedata.decimalplaces);selectedValue +=opt.typedata.interval;($("div.dnnSpinnerDisplay",objContainerDiv)).html(valueData);inputControl.val(valueData);}
inputControl.triggerHandler('focus');return false;});$("a.dnnSpinnerBotButton",objContainerDiv).click(function(){if((selectedValue-opt.typedata.interval)>=opt.typedata.min||opt.looping){if((selectedValue-opt.typedata.interval)<opt.typedata.min){selectedValue=opt.typedata.max + opt.typedata.interval;}
var valueData=(selectedValue-opt.typedata.interval).toFixed(opt.typedata.decimalplaces);selectedValue-=opt.typedata.interval;($("div.dnnSpinnerDisplay",objContainerDiv)).html(valueData);inputControl.val(valueData);}
inputControl.triggerHandler('focus');return false;});}
break;case'list':if(!opt.typedata.list||opt.typedata.list.lenght==0){return inputControl;}
var listItems=opt.typedata.list.split(',');var selectedIndex=jQuery.inArray(opt.defaultVal,listItems);if(selectedIndex<0){selectedIndex=0;opt.defaultVal=listItems[0];}
inputControl.val(opt.defaultVal);($("div.dnnSpinnerDisplay",objContainerDiv)).html(opt.defaultVal);if(listItems.length>1){$("a.dnnSpinnerBotButton",objContainerDiv).click(function(){if(selectedIndex<(listItems.length-1)||opt.looping){if(selectedIndex==listItems.length-1){selectedIndex=-1;}
selectedIndex++;var valueData=listItems[selectedIndex];($("div.dnnSpinnerDisplay",objContainerDiv)).html(valueData);inputControl.val(valueData);}
inputControl.triggerHandler('focus');return false;});$("a.dnnSpinnerTopButton",objContainerDiv).click(function(){if(selectedIndex>0||opt.looping){if(selectedIndex==0){selectedIndex=listItems.length;}
selectedIndex--;var valueData=listItems[selectedIndex];($("div.dnnSpinnerDisplay",objContainerDiv)).html(valueData);inputControl.val(valueData);}
inputControl.triggerHandler('focus');return false;});}
break;};return inputControl;};})(jQuery);(function($){$.fn.dnnAutocomplete=function(options){var url;if(arguments.length>1){url=options;options=arguments[1];options.url=url;}else if(typeof options==='string'){url=options;options={url:url};}
var opts=$.extend({},$.fn.dnnAutocomplete.defaults,options);return this.each(function(){var $this=$(this);$this.data('autocompleter',new $.dnnAutocompleter($this,$.meta?$.extend({},opts,$this.data()):opts));});};$.fn.dnnAutocomplete.defaults={inputClass:'dnn_acInput',loadingClass:'dnn_acLoading',resultsClass:'dnn_acResults',selectClass:'dnn_acSelect',queryParamName:'q',contentTypeParamName:'contentTypeId',extraParams:{},remoteDataType:false,lineSeparator:'\n',cellSeparator:'|',minChars:2,maxItemsToShow:10,delay:400,useCache:false,maxCacheLength:10,matchSubset:true,matchCase:false,matchInside:true,mustMatch:false,selectFirst:false,selectOnly:false,showResult:null,preventDefaultReturn:1,preventDefaultTab:0,autoFill:false,filterResults:true,sortResults:true,sortFunction:null,onItemSelect:null,onNoMatch:null,onFinish:null,matchStringConverter:null,beforeUseConverter:null,autoWidth:'min-width',useDelimiter:false,delimiterChar:',',delimiterKeyCode:188,processData:null,onError:null,moduleId:null};var sanitizeResult=function(result){var value,data;var type=typeof result;if(type==='string'){value=result;data={};}else if($.isArray(result)){value=result[0];data=result.slice(1);}else if(type==='object'){value=result.value;data=result.data;}else value='';value=String(value);if(typeof data!=='object'){data={};}
return{value:value,data:data};};var sanitizeInteger=function(value,stdValue,options){var num=parseInt(value,10);options=options||{};if(isNaN(num)||(options.min&&num<options.min)){num=stdValue;}
return num;};var makeUrlParam=function(name,value){return[name,encodeURIComponent(value)].join('=');};var makeUrl=function(url,params){var urlAppend=[];$.each(params,function(index,value){urlAppend.push(makeUrlParam(index,value));});if(urlAppend.length){url +=url.indexOf('?')===-1?'?':'&';url +=urlAppend.join('&');}
return url;};var sortValueAlpha=function(a,b,matchCase){a=String(a.value);b=String(b.value);if(!matchCase){a=a.toLowerCase();b=b.toLowerCase();}
if(a>b){return 1;}
if(a<b){return-1;}
return 0;};$.dnnAutocompleter=function($elem,options){if(!$elem||!($elem instanceof $)||$elem.length!==1||$elem.get(0).tagName.toUpperCase()!=='INPUT'){throw new Error('Invalid parameter for dnnAutocompleter, jQuery object with one element with INPUT tag expected.');}
var self=this;this.options=options;this.cacheData_={};this.cacheLength_=0;this.selectClass_='jquery-autocomplete-selected-item';this.keyTimeout_=null;this.finishTimeout_=null;this.lastKeyPressed_=null;this.lastProcessedValue_=null;this.lastSelectedValue_=null;this.active_=false;this.finishOnBlur_=true;this.options.minChars=sanitizeInteger(this.options.minChars,$.fn.dnnAutocomplete.defaults.minChars,{min:0});this.options.maxItemsToShow=sanitizeInteger(this.options.maxItemsToShow,$.fn.dnnAutocomplete.defaults.maxItemsToShow,{min:0});this.options.maxCacheLength=sanitizeInteger(this.options.maxCacheLength,$.fn.dnnAutocomplete.defaults.maxCacheLength,{min:1});this.options.delay=sanitizeInteger(this.options.delay,$.fn.dnnAutocomplete.defaults.delay,{min:0});if(this.options.preventDefaultReturn!=2){this.options.preventDefaultReturn=this.options.preventDefaultReturn?1:0;}
if(this.options.preventDefaultTab!=2){this.options.preventDefaultTab=this.options.preventDefaultTab?1:0;}
this.dom={};this.dom.$elem=$elem;this.dom.$elem.attr('autocomplete','off').addClass(this.options.inputClass);this.dom.$results=$('<div></div>').hide().addClass(this.options.resultsClass).css({position:'absolute'});$('body').append(this.dom.$results);$elem.keydown(function(e){self.lastKeyPressed_=e.keyCode;switch(self.lastKeyPressed_){case self.options.delimiterKeyCode:if(self.options.useDelimiter&&self.active_){self.selectCurrent();}
break;case 35:case 36:case 16:case 17:case 18:case 37:case 39:break;case 38:e.preventDefault();if(self.active_){self.focusPrev();}else{self.activate();}
return false;case 40:e.preventDefault();if(self.active_){self.focusNext();}else{self.activate();}
return false;case 9:if(self.active_){self.selectCurrent();if(self.options.preventDefaultTab){e.preventDefault();return false;}}
if(self.options.preventDefaultTab===2){e.preventDefault();return false;}
break;case 13:if(self.active_){self.selectCurrent();if(self.options.preventDefaultReturn){e.preventDefault();return false;}}
if(self.options.preventDefaultReturn===2){e.preventDefault();return false;}
break;case 27:if(self.active_){e.preventDefault();self.deactivate(true);return false;}
break;default:self.activate();}
return true;});var onBlurFunction=function(){self.deactivate(true);};$elem.blur(function(){if(self.finishOnBlur_){self.finishTimeout_=setTimeout(onBlurFunction,200);}});$elem.parents('form').on('submit',onBlurFunction);};$.dnnAutocompleter.prototype.position=function(){var offset=this.dom.$elem.offset();var height=this.dom.$results.outerHeight();var totalHeight=window.outerHeight;var inputBottom=offset.top + this.dom.$elem.outerHeight();var bottomIfDown=inputBottom + height;var position={top:inputBottom,left:offset.left};if(bottomIfDown>totalHeight){var topIfUp=offset.top-height;if(topIfUp>=0){position.top=topIfUp;}}
this.dom.$results.css(position);};$.dnnAutocompleter.prototype.cacheRead=function(filter){var filterLength,searchLength,search,maxPos,pos;if(this.options.useCache){filter=String(filter);filterLength=filter.length;if(this.options.matchSubset){searchLength=1;}else{searchLength=filterLength;}
while(searchLength<=filterLength){if(this.options.matchInside){maxPos=filterLength-searchLength;}else{maxPos=0;}
pos=0;while(pos<=maxPos){search=filter.substr(0,searchLength);if(this.cacheData_[search]!==undefined){return this.cacheData_[search];}
pos++;}
searchLength++;}}
return false;};$.dnnAutocompleter.prototype.cacheWrite=function(filter,data){if(this.options.useCache){if(this.cacheLength_>=this.options.maxCacheLength){this.cacheFlush();}
filter=String(filter);if(this.cacheData_[filter]!==undefined){this.cacheLength_++;}
this.cacheData_[filter]=data;return this.cacheData_[filter];}
return false;};$.dnnAutocompleter.prototype.cacheFlush=function(){this.cacheData_={};this.cacheLength_=0;};$.dnnAutocompleter.prototype.callHook=function(hook,data){var f=this.options[hook];if(f&&$.isFunction(f)){return f(data,this);}
return false;};$.dnnAutocompleter.prototype.activate=function(){var self=this;if(this.keyTimeout_){clearTimeout(this.keyTimeout_);}
this.keyTimeout_=setTimeout(function(){self.activateNow();},this.options.delay);};$.dnnAutocompleter.prototype.activateNow=function(){var value=this.beforeUseConverter(this.dom.$elem.val());if(value!==this.lastProcessedValue_&&value!==this.lastSelectedValue_){this.fetchData(value);}};$.dnnAutocompleter.prototype.fetchData=function(value){var self=this;var processResults=function(results,filter){if(self.options.processData){results=self.options.processData(results);}
self.showResults(self.filterResults(results,filter),filter);};this.lastProcessedValue_=value;if(value.length<this.options.minChars){processResults([],value);}else if(this.options.data){processResults(this.options.data,value);}else{this.fetchRemoteData(value,function(remoteData){processResults(remoteData,value);});}};$.dnnAutocompleter.prototype.fetchRemoteData=function(filter,callback){var data=this.cacheRead(filter);if(data){callback(data);}else{var self=this;var ajaxCallback=function(d){var parsed=false;if(d!==false){parsed=self.parseRemoteData(d);self.cacheWrite(filter,parsed);}
self.dom.$elem.removeClass(self.options.loadingClass);callback(parsed);};this.dom.$elem.addClass(this.options.loadingClass);var services=self.options.moduleId?($.dnnSF?$.dnnSF(self.options.moduleId):null):null;$.ajax({url:this.makeUrl(filter),beforeSend:services?services.setModuleHeaders:null,success:ajaxCallback,error:function(jqXhr,textStatus,errorThrown){if($.isFunction(self.options.onError)){self.options.onError(jqXhr,textStatus,errorThrown);}else{ajaxCallback(false);}},type:'GET',dataType:'json',contentType:"application/json"});}};$.dnnAutocompleter.prototype.setExtraParam=function(name,value){var index=$.trim(String(name));if(index){if(!this.options.extraParams){this.options.extraParams={};}
if(this.options.extraParams[index]!==value){this.options.extraParams[index]=value;this.cacheFlush();}}};$.dnnAutocompleter.prototype.makeUrl=function(param){var url=this.options.url;var params={};params[this.options.queryParamName]=param;return makeUrl(url,params);};$.dnnAutocompleter.prototype.parseRemoteData=function(remoteData){var data=remoteData;if(typeof data['d']!='undefined'){data=$.parseJSON(data['d']);}
return data;};$.dnnAutocompleter.prototype.filterResult=function(result,filter){if(!result.value){return false;}
if(this.options.filterResults){var pattern=this.matchStringConverter(filter);var testValue=this.matchStringConverter(result.value);if(!this.options.matchCase){pattern=pattern.toLowerCase();testValue=testValue.toLowerCase();}
var patternIndex=testValue.indexOf(pattern);if(this.options.matchInside){return patternIndex>-1;}else{return patternIndex===0;}}
return true;};$.dnnAutocompleter.prototype.filterResults=function(results,filter){var filtered=[];var i,result;for(i=0;i<results.length;i++){result=sanitizeResult(results[i]);if(this.filterResult(result,filter)){filtered.push(result);}}
if(this.options.sortResults){filtered=this.sortResults(filtered,filter);}
if(this.options.maxItemsToShow>0&&this.options.maxItemsToShow<filtered.length){filtered.length=this.options.maxItemsToShow;}
return filtered;};$.dnnAutocompleter.prototype.sortResults=function(results,filter){var self=this;var sortFunction=this.options.sortFunction;if(!$.isFunction(sortFunction)){sortFunction=function(a,b){return sortValueAlpha(a,b,self.options.matchCase);};}
results.sort(function(a,b){return sortFunction(a,b,filter,self.options);});return results;};$.dnnAutocompleter.prototype.matchStringConverter=function(s,a,b){var converter=this.options.matchStringConverter;if($.isFunction(converter)){s=converter(s,a,b);}
return s;};$.dnnAutocompleter.prototype.beforeUseConverter=function(s,a,b){s=this.getValue();var converter=this.options.beforeUseConverter;if($.isFunction(converter)){s=converter(s,a,b);}
return s;};$.dnnAutocompleter.prototype.enableFinishOnBlur=function(){this.finishOnBlur_=true;};$.dnnAutocompleter.prototype.disableFinishOnBlur=function(){this.finishOnBlur_=false;};$.dnnAutocompleter.prototype.createItemFromResult=function(result,filter){var self=this;var $li=$('<li>'+ this.showResult(result.value,result.data,filter)+'</li>');$li.data({value:result.value,data:result.data}).click(function(){self.selectItem($li);}).mousedown(self.disableFinishOnBlur).mouseup(self.enableFinishOnBlur);return $li;};$.dnnAutocompleter.prototype.getItems=function(){return $('>ul>li',this.dom.$results);};$.dnnAutocompleter.prototype.showResults=function(results,filter){var numResults=results.length;var self=this;var $ul=$('<ul></ul>');var i,result,$li,autoWidth,first=false,$first=false;if(numResults){for(i=0;i<numResults;i++){result=results[i];$li=this.createItemFromResult(result,filter);$ul.append($li);if(first===false){first=String(result.value);$first=$li;$li.addClass(this.options.firstItemClass);}
if(i===numResults-1){$li.addClass(this.options.lastItemClass);}}
this.dom.$results.html($ul).show();this.position();if(this.options.autoWidth){autoWidth=this.dom.$elem.outerWidth()-this.dom.$results.outerWidth()+ this.dom.$results.width();this.dom.$results.css(this.options.autoWidth,autoWidth);}
this.getItems().hover(function(){self.focusItem(this);},function(){});if(this.autoFill(first,filter)||this.options.selectFirst||(this.options.selectOnly&&numResults===1)){this.focusItem($first);}
this.active_=true;this.focusNext();}else{this.hideResults();this.active_=false;}};$.dnnAutocompleter.prototype.showResult=function(value,data,filter){if($.isFunction(this.options.showResult)){return this.options.showResult(value,data);}else{var regex=new RegExp('('+ filter +')','gi');return value.replace(regex,function($0,$1){return('<b>'+ $1 +'</b>');});}};$.dnnAutocompleter.prototype.autoFill=function(value,filter){var lcValue,lcFilter,valueLength,filterLength;if(this.options.autoFill&&this.lastKeyPressed_!==8){lcValue=String(value).toLowerCase();lcFilter=String(filter).toLowerCase();valueLength=value.length;filterLength=filter.length;if(lcValue.substr(0,filterLength)===lcFilter){var d=this.getDelimiterOffsets();var pad=d.start?' ':'';this.setValue(pad + value);var start=filterLength + d.start + pad.length;var end=valueLength + d.start + pad.length;this.selectRange(start,end);return true;}}
return false;};$.dnnAutocompleter.prototype.focusNext=function(){this.focusMove(+1);};$.dnnAutocompleter.prototype.focusPrev=function(){this.focusMove(-1);};$.dnnAutocompleter.prototype.focusMove=function(modifier){var $items=this.getItems();modifier=sanitizeInteger(modifier,0);if(modifier){for(var i=0;i<$items.length;i++){if($($items[i]).hasClass(this.selectClass_)){this.focusItem(i + modifier);return;}}}
this.focusItem(0);};$.dnnAutocompleter.prototype.focusItem=function(item){var $item,$items=this.getItems();if($items.length){$items.removeClass(this.selectClass_).removeClass(this.options.selectClass);if(typeof item==='number'){if(item<0){item=0;}else if(item>=$items.length){item=$items.length-1;}
$item=$($items[item]);}else{$item=$(item);}
if($item){$item.addClass(this.selectClass_).addClass(this.options.selectClass);}}};$.dnnAutocompleter.prototype.selectCurrent=function(){var $item=$('li.'+ this.selectClass_,this.dom.$results);if($item.length===1){this.selectItem($item);}else{this.deactivate(false);}};$.dnnAutocompleter.prototype.selectItem=function($li){var value=$li.data('value');var data=$li.data('data');var displayValue=this.displayValue(value,data);var processedDisplayValue=this.beforeUseConverter(displayValue);this.lastProcessedValue_=processedDisplayValue;this.lastSelectedValue_=processedDisplayValue;var d=this.getDelimiterOffsets();var delimiter=this.options.delimiterChar;var elem=this.dom.$elem;var extraCaretPos=0;if(this.options.useDelimiter){if(elem.val().substring(d.start-1,d.start)==delimiter&&delimiter!=' '){displayValue=' '+ displayValue;}
if(elem.val().substring(d.end,d.end + 1)!=delimiter&&this.lastKeyPressed_!=this.options.delimiterKeyCode){displayValue=displayValue + delimiter;}else{extraCaretPos=1;}}
this.setValue(displayValue);this.setCaret(d.start + displayValue.length + extraCaretPos);this.callHook('onItemSelect',{value:value,data:data});this.deactivate(true);elem.trigger('result',value);};$.dnnAutocompleter.prototype.displayValue=function(value,data){if($.isFunction(this.options.displayValue)){return this.options.displayValue(value,data);}
return value;};$.dnnAutocompleter.prototype.hideResults=function(){this.dom.$results.hide();};$.dnnAutocompleter.prototype.deactivate=function(finish){if(this.finishTimeout_){clearTimeout(this.finishTimeout_);}
if(this.keyTimeout_){clearTimeout(this.keyTimeout_);}
if(finish){if(this.lastProcessedValue_!==this.lastSelectedValue_){if(this.options.mustMatch){this.setValue('');}
this.callHook('onNoMatch');}
if(this.active_){this.callHook('onFinish');}
this.lastKeyPressed_=null;this.lastProcessedValue_=null;this.lastSelectedValue_=null;this.active_=false;}
this.hideResults();};$.dnnAutocompleter.prototype.selectRange=function(start,end){var input=this.dom.$elem.get(0);if(input.setSelectionRange){input.focus();input.setSelectionRange(start,end);}else if(input.createTextRange){var range=input.createTextRange();range.collapse(true);range.moveEnd('character',end);range.moveStart('character',start);range.select();}};$.dnnAutocompleter.prototype.setCaret=function(pos){this.selectRange(pos,pos);};$.dnnAutocompleter.prototype.getCaret=function(){var elem=this.dom.$elem,s,e,range;if(!$.support.cssFloat){var selection=document.selection;if(elem[0].tagName.toLowerCase()!='textarea'){var val=elem.val();range=selection.createRange().duplicate();range.moveEnd('character',val.length);s=(range.text==''?val.length:val.lastIndexOf(range.text));range=selection.createRange().duplicate();range.moveStart('character',-val.length);e=range.text.length;}else{range=selection.createRange();var storedRange=range.duplicate();storedRange.moveToElementText(elem[0]);storedRange.setEndPoint('EndToEnd',range);s=storedRange.text.length-range.text.length;e=s + range.text.length;}}else{s=elem[0].selectionStart;e=elem[0].selectionEnd;}
return{start:s,end:e};};$.dnnAutocompleter.prototype.setValue=function(value){if(this.options.useDelimiter){var val=this.dom.$elem.val();var d=this.getDelimiterOffsets();var preVal=val.substring(0,d.start);var postVal=val.substring(d.end);value=preVal + value + postVal;}
this.dom.$elem.val(value).blur();};$.dnnAutocompleter.prototype.getValue=function(){var val=this.dom.$elem.val();if(this.options.useDelimiter){var d=this.getDelimiterOffsets();return val.substring(d.start,d.end).trim();}else{return val;}};$.dnnAutocompleter.prototype.getDelimiterOffsets=function(){var val=this.dom.$elem.val();if(this.options.useDelimiter){var preCaretVal=val.substring(0,this.getCaret().start);var start=preCaretVal.lastIndexOf(this.options.delimiterChar)+ 1;var postCaretVal=val.substring(this.getCaret().start);var end=postCaretVal.indexOf(this.options.delimiterChar);if(end==-1)end=val.length;end +=this.getCaret().start;}else{start=0;end=val.length;}
return{start:start,end:end};};})(jQuery);(function($){var delimiter=new Array();var tagsCallbacks=new Array();$.fn.dnnDoAutosize=function(o){var minWidth=$(this).data('minwidth'),maxWidth=$(this).data('maxwidth'),val='',input=$(this),testSubject=$('#'+ $(this).data('tester_id'));if(val===(val=input.val())){return;}
var escaped=val.replace(/&/g,'&amp;').replace(/\s/g,' ').replace(/</g,'&lt;').replace(/>/g,'&gt;');testSubject.html(escaped);var testerWidth=testSubject.width(),newWidth=(testerWidth + o.comfortZone)>=minWidth?testerWidth + o.comfortZone:minWidth,currentWidth=input.width(),isValidWidthChange=(newWidth<currentWidth&&newWidth>=minWidth)||(newWidth>minWidth&&newWidth<maxWidth);if(isValidWidthChange){input.width(newWidth);}};$.fn.dnnResetAutosize=function(options){var minWidth=$(this).data('minwidth')||options.minInputWidth||$(this).width(),maxWidth=$(this).data('maxwidth')||options.maxInputWidth||($(this).closest('.dnnTagsInput').width()-options.inputPadding),input=$(this),testSubject=$('<tester/>').css({position:'absolute',top:-9999,left:-9999,width:'auto',fontSize:input.css('fontSize'),fontFamily:input.css('fontFamily'),fontWeight:input.css('fontWeight'),letterSpacing:input.css('letterSpacing'),whiteSpace:'nowrap'}),testerId=$(this).attr('id')+'_autosize_tester';if(!$('#'+ testerId).length>0){testSubject.attr('id',testerId);testSubject.appendTo('body');}
input.data('minwidth',minWidth);input.data('maxwidth',maxWidth);input.data('tester_id',testerId);input.css('width',minWidth);};$.fn.dnnAddTag=function(value,options){options=jQuery.extend({focus:false,callback:true},options);this.each(function(){var id=$(this).attr('id');var tagslist=$(this).val().split(delimiter[id]);if(tagslist[0]==''){tagslist=new Array();}
value=jQuery.trim(value);var skipTag;if(options.unique){skipTag=$(this).dnnTagExist(value);if(skipTag==true){$('#'+ id +'_tag').addClass('dnnTagsInvalid');}
else
$('#'+ id +'_tag').removeClass('dnnTagsInvalid');}else{skipTag=false;$('#'+ id +'_tag').removeClass('dnnTagsInvalid');}
if(value!=''&&skipTag!=true){$('<span>').addClass('tag').append($('<span>').text(value).append('&nbsp;&nbsp;'),$('<a>',{href:'#',title:'Removing tag'}).click(function(){return $('#'+ id).dnnRemoveTag(escape(value));})).insertBefore('#'+ id +'_addTag');tagslist.push(value);$('#'+ id +'_tag').val('');if(options.focus){$('#'+ id +'_tag').focus();}else{$('#'+ id +'_tag').blur();}
$.fn.dnnTagsInput.updateTagsField(this,tagslist);var f;if(options.callback&&tagsCallbacks[id]&&tagsCallbacks[id]['onAddTag']){f=tagsCallbacks[id]['onAddTag'];f.call(this,value);}
if(tagsCallbacks[id]&&tagsCallbacks[id]['onChange']){var i=tagslist.length;f=tagsCallbacks[id]['onChange'];f.call(this,$(this),tagslist[i-1]);}}});return false;};$.fn.dnnRemoveTag=function(value){value=unescape(value);this.each(function(){var id=$(this).attr('id');var old=$(this).val().split(delimiter[id]);$('#'+ id +'_tagsinput .tag').remove();var str='';for(var i=0;i<old.length;i++){if(old[i]!=value){str=str + delimiter[id]+ old[i];}}
$.fn.dnnTagsInput.importTags(this,str);if(tagsCallbacks[id]&&tagsCallbacks[id]['onRemoveTag']){var f=tagsCallbacks[id]['onRemoveTag'];f.call(this,value);}});return false;};$.fn.dnnTagExist=function(val){var id=$(this).attr('id'),tagslist=$(this).val().split(delimiter[id]);return(jQuery.inArray(val,tagslist)>=0);};$.fn.dnnImportTags=function(str){var id=$(this).attr('id');$('#'+ id +'_tagsinput .tag').remove();$.fn.dnnTagsInput.importTags(this,str);};$.fn.dnnTagsInput=function(options){var onError=null;var triggerOnError=function(handler){if(!onError){onError=setTimeout(function(){onError=null;if(handler)handler();},0);}};var settings=jQuery.extend({interactive:true,defaultText:'Add a tag',minChars:0,maxChars:50,maxTags:16,onErrorLessThanMinChars:function(){$.dnnAlert({text:'You can only input more than 0 chars per tag',title:'Input Tag Error'});},onErrorMoreThanMaxChars:function(){$.dnnAlert({text:'You can only input less than 50 chars per tag',title:'Input Tag Error'});},onErrorMoreThanMaxTags:function(){$.dnnAlert({text:'You can only provide no more than 16 tags',title:'Input Tag Error'});},width:'45%',autocomplete:{selectFirst:false},'hide':true,'delimiter':',','unique':true,removeWithBackspace:true,placeholderColor:'#999',normalColor:'#666',autosize:true,comfortZone:20,inputPadding:6*2},options);this.each(function(){var instance=$(this).data('dnnTagInput');if(instance)return this;if(settings.hide){$(this).hide();}
var id=$(this).attr('id');if(!id||delimiter[$(this).attr('id')]){id=$(this).attr('id','tags'+ new Date().getTime()).attr('id');}
var data=jQuery.extend({pid:id,real_input:'#'+ id,holder:'#'+ id +'_tagsinput',input_wrapper:'#'+ id +'_addTag',fake_input:'#'+ id +'_tag'},settings);$(this).data('dnnTagInput',data);delimiter[id]=data.delimiter;if(settings.onAddTag||settings.onRemoveTag||settings.onChange){tagsCallbacks[id]=new Array();tagsCallbacks[id]['onAddTag']=settings.onAddTag;tagsCallbacks[id]['onRemoveTag']=settings.onRemoveTag;tagsCallbacks[id]['onChange']=settings.onChange;}
var markup='<div id="'+ id +'_tagsinput" class="dnnTagsInput">';markup +='<div id="'+ id +'_addTag">';if(settings.interactive){markup +='<input id="'+ id +'_tag" value="" data-default="'+ settings.defaultText +'" autocomplete="off" />';}
markup +='</div>';markup=markup +'<div class="dnnTagsClear"></div></div>';$(markup).insertAfter(this);$(data.holder).css({'width':settings.width,'min-height':settings.height});if($(data.real_input).val()!=''){$.fn.dnnTagsInput.importTags($(data.real_input),$(data.real_input).val());}
if(settings.interactive){var placeholderSupported=('placeholder'in $(data.fake_input)[0]);if(placeholderSupported)
$(data.fake_input).attr('placeholder',$(data.fake_input).attr('data-default'));else{$(data.fake_input).val($(data.fake_input).attr('data-default'));$(data.fake_input).css('color',settings.placeholderColor);}
$(data.fake_input).dnnResetAutosize(settings);$(data.holder).bind('click',data,function(event){$(event.data.real_input).triggerHandler('focus');$(event.data.fake_input).triggerHandler('focus');return false;});$(data.fake_input).bind('focus',data,function(event){if($(event.data.fake_input).val()==$(event.data.fake_input).attr('data-default')){$(event.data.fake_input).val('');}
$(event.data.fake_input).css('color',settings.normalColor);});if(settings.autocomplete_url!=undefined){if($.dnnAutocompleter!==undefined){if(settings.advanced&&settings.advanced.length){settings.autocomplete.advanced=settings.advanced;}
$(data.fake_input).dnnAutocomplete(settings.autocomplete_url,settings.autocomplete);$(data.fake_input).bind('result',data,function(event,tag){if(tag){var tagslist=$(event.data.real_input).val().split(delimiter[id]);if(tagslist[0]==''){tagslist=new Array();}
if(event.data.maxTags<=tagslist.length){if(event.data.onErrorMoreThanMaxTags)
triggerOnError(event.data.onErrorMoreThanMaxTags);$(data.fake_input).val('');}
else
$(event.data.real_input).dnnAddTag(tag,{focus:true,unique:(settings.unique)});}});}}else{$(data.fake_input).bind('blur',data,function(event){var d=$(this).attr('data-default');var tagslist=$(event.data.real_input).val().split(delimiter[id]);if(tagslist[0]==''){tagslist=new Array();}
if($(event.data.fake_input).val()!=''&&$(event.data.fake_input).val()!=d){if(event.data.minChars>$(event.data.fake_input).val().length){if(event.data.onErrorLessThanMinChars)
triggerOnError(event.data.onErrorLessThanMinChars);$(data.fake_input).val('');}
else if(event.data.maxChars<$(event.data.fake_input).val().length){if(event.data.onErrorMoreThanMaxChars)
triggerOnError(event.data.onErrorMoreThanMaxChars);$(data.fake_input).val('');}
else if(event.data.maxTags<=tagslist.length){if(event.data.onErrorMoreThanMaxTags)
triggerOnError(event.data.onErrorMoreThanMaxTags);$(data.fake_input).val('');}
else
$(event.data.real_input).dnnAddTag($(event.data.fake_input).val(),{focus:true,unique:(settings.unique)});}else{$(event.data.fake_input).val($(event.data.fake_input).attr('data-default'));$(event.data.fake_input).css('color',settings.placeholderColor);}
return false;});}
$(data.fake_input).bind('keypress',data,function(event){if(event.which==event.data.delimiter.charCodeAt(0)||event.which==13){event.preventDefault();var tagslist=$(event.data.real_input).val().split(delimiter[id]);if(tagslist[0]==''){tagslist=new Array();}
if(event.data.minChars>$(event.data.fake_input).val().length){if(event.data.onErrorLessThanMinChars)
triggerOnError(event.data.onErrorLessThanMinChars);$(data.fake_input).val('');}
else if(event.data.maxChars<$(event.data.fake_input).val().length){if(event.data.onErrorMoreThanMaxChars)
triggerOnError(event.data.onErrorMoreThanMaxChars);$(data.fake_input).val('');}
else if(event.data.maxTags<=tagslist.length){if(event.data.onErrorMoreThanMaxTags)
triggerOnError(event.data.onErrorMoreThanMaxTags);$(data.fake_input).val('');}
else
$(event.data.real_input).dnnAddTag($(event.data.fake_input).val(),{focus:true,unique:(settings.unique)});$(event.data.fake_input).dnnResetAutosize(settings);return false;}else if(event.data.autosize){$(event.data.fake_input).dnnDoAutosize(settings);}
return true;});data.removeWithBackspace&&$(data.fake_input).bind('keydown',function(event){if(event.keyCode==8&&$(this).val()==''){event.preventDefault();var lastTag=$(this).closest('.dnnTagsInput').find('.tag:last').text();var lastTagId=$(this).attr('id').replace(/_tag$/,'');lastTag=lastTag.replace(/[\s]+$/,'');$('#'+ lastTagId).dnnRemoveTag(escape(lastTag));$(this).trigger('focus');}});$(data.fake_input).blur();if(data.unique){$(data.fake_input).keydown(function(event){if(event.keyCode==8||String.fromCharCode(event.which).match(/\w+|[áéíóúÁÉÍÓÚñÑ,/]+/)){$(this).removeClass('dnnTagsInvalid');}});}}
return this;});return this;};$.fn.dnnTagsInput.updateTagsField=function(obj,tagslist){var id=$(obj).attr('id');$(obj).val(tagslist.join(delimiter[id]));};$.fn.dnnTagsInput.importTags=function(obj,val){$(obj).val('');var id=$(obj).attr('id');var tags=val.split(delimiter[id]);for(var i=0;i<tags.length;i++){$(obj).dnnAddTag(tags[i],{focus:false,callback:false});}
if(tagsCallbacks[id]&&tagsCallbacks[id]['onChange']){var f=tagsCallbacks[id]['onChange'];f.call(obj,obj,tags[i]);}};})(jQuery);(function($){$.fn.toggleErrorMessage=function(options){var defaultOptions={errorMessage:"Error message",errorCls:"dnnFormError",show:true,removeErrorMessage:true};options=$.extend(defaultOptions,options);return this.each(function(){var dnnFormItem=$(this).closest('.dnnFormItem');if(options.show){var errorSpan=dnnFormItem.find('span.dnnFormMessage.'+ options.errorCls);if(errorSpan.length){errorSpan.html(options.errorMessage);}else{errorSpan=$('<span class="dnnFormMessage '+ options.errorCls +'">'+ options.errorMessage +'</span>');dnnFormItem.append(errorSpan);}
if(this.tagName.toLowerCase()=='div'){if($(this).hasClass('RadComboBox')){$(this).addClass('dnnError');}}
else{if($(this).parent().hasClass('RadPicker')){$(this).parent().find('input.riTextBox').css('border','1px solid red');}
else if($(this).hasClass('dnnSpinnerInput')){$(this).parent().css('border','1px solid red');}
else{$(this).css('border','1px solid red');}}}
else{if(options.removeErrorMessage)
dnnFormItem.find('span.'+ options.errorCls).remove();else
dnnFormItem.find('span.'+ options.errorCls).hide();if(this.tagName.toLowerCase()=='div'){if($(this).hasClass('RadComboBox')){$(this).removeClass('dnnError');}}
else{if($(this).hasClass('dnnSpinnerInput')){$(this).parent().css('border','1px solid #ccc');}
else{$(this).css('border','1px solid #ccc');}}}});};$.fn.dnnFormSubmit=function(options){var defaultOptions={validates:[]};options=$.extend(defaultOptions,options);return this.each(function(){$(this).click(function(){var formValidate=true;for(var i=0;i<options.validates.length;i++){var ele=$('#'+ options.validates[i].ele);var func=options.validates[i].func;if(ele.length){var eleVal=ele.val();var eleError=func.call(ele.get(0),eleVal);if(eleError){ele.toggleErrorMessage({errorMessage:eleError,show:true});formValidate=false;}
else{ele.toggleErrorMessage({show:false});}
var hideErrorInfo=function(){$(this).toggleErrorMessage({show:false});};ele.unbind('focus',hideErrorInfo).bind('focus',hideErrorInfo);}}
return formValidate;});});};$.dnnRadPickerHack=function(){var hideErrorInfo=function(){$(this).toggleErrorMessage({show:false,removeErrorMessage:false});};var dnnRadPickerPopupFix=function(){if($.support.cssFloat){var id=$(this).attr('id');var popupId=id.replace('popupButton','calendar_wrapper');var popupElement=$('#'+ popupId);var wrapperId=id.replace('popupButton','wrapper');var wrapperElement=$('#'+ wrapperId);var popupElementTop=popupElement.parent().position().top;var wrapperElementTop=wrapperElement.offset().top;var popupTbl=popupElement.find('.RadCalendar_Default');var nextEle=popupTbl.next();if(nextEle.hasClass('RadCalendar_Default_PopupArrow_Down')||nextEle.hasClass('RadCalendar_Default_PopupArrow_Up'))
nextEle.remove();if(popupElementTop<wrapperElementTop){popupTbl.after('<div class="RadCalendar_Default_PopupArrow_Down"></div>');}
else{popupTbl.after('<div class="RadCalendar_Default_PopupArrow_Up"></div>');}}
$(this).toggleErrorMessage({show:false,removeErrorMessage:false});};$('.RadPicker_Default a.rcCalPopup').unbind('click',dnnRadPickerPopupFix).bind('click',dnnRadPickerPopupFix);$('.RadPicker_Default .riTextBox').unbind('focus',hideErrorInfo).bind('focus',hideErrorInfo);};$.dnnComboBoxLoaded=function(sender){if(sender.constructor.__typeName=="Telerik.Web.UI.RadComboBox"){$(sender._inputDomElement).closest(".RadComboBox").removeAttr("style");}};$.dnnComboBoxHack=function(sender){$(('#'+ sender._clientStateFieldID).replace('_ClientState','')).toggleErrorMessage({show:false,removeErrorMessage:false});};$.dnnComboBoxScroll=function(sender){if($.support.cssFloat){$(('#'+ sender._clientStateFieldID +' .rcbScroll').replace('ClientState','DropDown')).jScrollPane();}};$.dnnGridCreated=function(sender){var clientId=sender.ClientID;var $grid=$('#'+ clientId);$('input.rgSortDesc, input.rgSortAsc',$grid).click(function(){var href=$(this).parent().find('a').get(0).href;window.location=href;return false;});if($grid.hasClass('dnnTooltipGrid')){$grid.dnnHelperTipDestroy();$('.rgRow, .rgAltRow',$grid).each(function(){var info="Here is some text will show up and explian more about this information";$(this).dnnHelperTip({helpContent:info,holderId:clientId});});}
var grid=$find(clientId);var headerCheck=$('.rgCheck',$grid);if(headerCheck.length){headerCheck.each(function(){var checkbox=$(this).find('input[type="checkbox"]').get(0);var onclick=checkbox.onclick;checkbox.onchange=onclick;checkbox.onclick=null;});$('.rgDataDiv input[type="checkbox"]',$grid).change(function(){var masterTable=grid.get_masterTableView();var rowIndex=$(this).closest('tr').get(0).rowIndex;var checked=this.checked;if(checked)
masterTable.selectItem(rowIndex);else
masterTable.deselectItem(rowIndex);});}
$('.rgDataDiv').each(function(){var $this=$(this);var ele=$this.get(0);ele.scrollPane=$this.jScrollPane();var api=ele.scrollPane.data('jsp');var throttleTimeout;$(window).bind('resize',function(){if(!$.support.cssFloat){if(throttleTimeout){clearTimeout(throttleTimeout);throttleTimeout=null;}
throttleTimeout=setTimeout(function(){api.reinitialise();throttleTimeout=null;},50);}else{api.reinitialise();}});if(window.__rgDataDivScrollTopPersistArray&&window.__rgDataDivScrollTopPersistArray.length){var y=window.__rgDataDivScrollTopPersistArray.pop();api.scrollToY(y);}});};})(jQuery);(function($){var types=['DOMMouseScroll','mousewheel'];if($.event.fixHooks){for(var i=types.length;i;){$.event.fixHooks[types[--i]]=$.event.mouseHooks;}}
$.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var i=types.length;i;){this.addEventListener(types[--i],handler,false);}}else{this.onmousewheel=handler;}},teardown:function(){if(this.removeEventListener){for(var i=types.length;i;){this.removeEventListener(types[--i],handler,false);}}else{this.onmousewheel=null;}}};$.fn.extend({mousewheel:function(fn){return fn?this.bind("mousewheel",fn):this.trigger("mousewheel");},unmousewheel:function(fn){return this.unbind("mousewheel",fn);}});function handler(event){var orgEvent=event||window.event,args=[].slice.call(arguments,1),delta=0,deltaX=0,deltaY=0;event=$.event.fix(orgEvent);event.type="mousewheel";if(orgEvent.wheelDelta){delta=orgEvent.wheelDelta/120;}
if(orgEvent.detail){delta=-orgEvent.detail/3;}
deltaY=delta;if(orgEvent.axis!==undefined&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS){deltaY=0;deltaX=-1*delta;}
if(orgEvent.wheelDeltaY!==undefined){deltaY=orgEvent.wheelDeltaY/120;}
if(orgEvent.wheelDeltaX!==undefined){deltaX=-1*orgEvent.wheelDeltaX/120;}
args.unshift(event,delta,deltaX,deltaY);return($.event.dispatch||$.event.handle).apply(this,args);}})(jQuery);(function($){$.fn.dnnFileInput=function(options){var opts=$.extend({},$.fn.dnnFileInput.defaultOptions,options);return this.each(function(){var $ctrl=$(this);if(this.wrapper)
return;if(this.parentNode&&this.parentNode.tagName.toLowerCase()=='span'&&$ctrl.parent().hasClass('dnnInputFileWrapper')){return;}
this.wrapper=$("<span class='dnnInputFileWrapper "+ opts.buttonClass +"'></span>");var text=$ctrl.data('text');text=text||'Choose File';this.wrapper.text(text);$ctrl.wrap(this.wrapper);$ctrl.data("wrapper",$ctrl.parent());if(opts.showSelectedFileNameAsButtonText){$ctrl.change(function(){var val=$(this).val();if(val!=''){var lastIdx=val.lastIndexOf('\\')+ 1;val=val.substring(lastIdx,val.length);}else{val=text;}
$(this).data("wrapper").get(0).childNodes[0].nodeValue=val;});}});};$.fn.dnnFileInput.defaultOptions={buttonClass:'dnnSecondaryAction',showSelectedFileNameAsButtonText:true};})(jQuery);(function($){var supportAjaxUpload=function(){var xhr=new XMLHttpRequest;return!!(xhr&&('upload'in xhr)&&('onprogress'in xhr.upload));};$.fn.dnnFileUpload=function(settings){return this.each(function(){var scope=$(this).attr('id');window.dnn.dnnFileUpload.setSettings(scope,settings);var service=$.dnnSF();$('#'+ settings.progressBarId).parent().hide();var droppableSpan=$('#'+ settings.dropZoneId +'>span');if('draggable'in document.createElement('span')){droppableSpan.show();}
else{droppableSpan.hide();}
var url=service.getServiceRoot('internalservices')+'fileupload/postfile';if(!supportAjaxUpload()){var antiForgeryToken=$('input[name="__RequestVerificationToken"]').val();url +='?__RequestVerificationToken='+ antiForgeryToken;}
$('#'+ scope +' input[type="file"]').fileupload({url:url,beforeSend:service.setModuleHeaders,dropZone:$('#'+ settings.dropZoneId),replaceFileInput:false,submit:function(e,data){data.formData={folder:settings.folder,filter:settings.fileFilter,overwrite:'true'};return true;},progressall:function(e,data){var progress=parseInt(data.loaded/data.total*100,10);if(progress<100){$('#'+ settings.progressBarId).parent().show();$('#'+ settings.progressBarId +'>div').css('width',progress +'%');}
else
$('#'+ settings.progressBarId).parent().hide();},done:function(e,data){$('#'+ settings.progressBarId).parent().hide();var img=new Image();$(img).load(function(){$('#'+ settings.dropZoneId +' img').remove();$(img).css({'max-width':180,'max-height':150}).insertBefore($('#'+ settings.dropZoneId +' span'));});var src;var testContent=$('<pre>'+ data.result +'</pre>');if(testContent.length){src=testContent.text();}
else
src=data.result;if(src&&$.trim(src)){img.src=src;var foldersCombo=$find(settings.foldersComboId);var folderPath=foldersCombo.get_value();url=service.getServiceRoot('internalservices')+'fileupload/loadfiles';$.ajax({url:url,type:'POST',data:{FolderPath:folderPath,FileFilter:settings.fileFilter,Required:false},beforeSend:service.setModuleHeaders,success:function(d){var combo=$find(settings.filesComboId);combo.clearItems();for(var i=0;i<d.length;i++){var txt=d[i].Text;var val=d[i].Value;var comboItem=new window.Telerik.Web.UI.RadComboBoxItem();comboItem.set_text(txt);comboItem.set_value(val);combo.get_items().add(comboItem);if(src.indexOf(txt)>0){comboItem.select();$('#'+ settings.fileIdId).val(val);var path=folderPath?folderPath +'/'+ txt:txt;$('#'+ settings.filePathId).val(path);}}},error:function(){}});}},fail:function(e,data){$('#'+ settings.progressBarId).parent().hide();var resp=JSON.parse(data.jqXHR.responseText);alert(resp.Message);}});setTimeout(function(){var filesCombo=$find(settings.filesComboId);var selectedFileId=filesCombo.get_value();url=service.getServiceRoot('internalservices')+'fileupload/loadimage';if(selectedFileId){$.ajax({url:url,type:'GET',data:{fileId:selectedFileId},success:function(d){var img=new Image();$(img).load(function(){$('#'+ settings.dropZoneId +' img').remove();$(img).css({'max-width':180,'max-height':150}).insertBefore($('#'+ settings.dropZoneId +' span'));});img.src=d;},error:function(){}});}},500);});};if(typeof window.dnn==='undefined')window.dnn={};window.dnn.dnnFileUpload=window.dnn.dnnFileUpload||{};window.dnn.dnnFileUpload.settings={};window.dnn.dnnFileUpload.setSettings=function(scope,settings){window.dnn.dnnFileUpload.settings[scope]=settings;};window.dnn.dnnFileUpload.getSettings=function(sender){var senderId=sender.get_id();var scope=$('#'+ senderId).closest('.dnnFileUploadScope').attr('id');return window.dnn.dnnFileUpload.settings[scope];};window.dnn.dnnFileUpload.Folders_Changed=function(sender,e){var settings=window.dnn.dnnFileUpload.getSettings(sender);if(!settings)return;var item=e.get_item();if(item){var folderPath=item.get_value();settings.folder=folderPath;var service=$.dnnSF();var url=service.getServiceRoot('internalservices')+'fileupload/loadfiles';$.ajax({url:url,type:'POST',data:{FolderPath:folderPath,FileFilter:settings.fileFilter,Required:false},beforeSend:service.setModuleHeaders,success:function(d){var combo=$find(settings.filesComboId);combo.clearItems();for(var i=0;i<d.length;i++){var txt=d[i].Text;var val=d[i].Value;var comboItem=new window.Telerik.Web.UI.RadComboBoxItem();comboItem.set_text(txt);comboItem.set_value(val);combo.get_items().add(comboItem);if(i==0){comboItem.select();}}},error:function(){}});}};window.dnn.dnnFileUpload.Files_Changed=function(sender,e){var settings=window.dnn.dnnFileUpload.getSettings(sender);if(!settings)return;var item=e.get_item();if(item){var fileId=item.get_value();$('#'+ settings.fileIdId).val(fileId);var fileName=item.get_text();var folderPath=settings.folder;var path=folderPath?folderPath +'/'+ fileName:fileName;$('#'+ settings.filePathId).val(path);var service=$.dnnSF();var url=service.getServiceRoot('internalservices')+'fileupload/loadimage';if(fileId){$.ajax({url:url,type:'GET',data:{fileId:fileId},success:function(d){var img=new Image();$(img).load(function(){$('#'+ settings.dropZoneId +' img').remove();$(img).css({'max-width':180,'max-height':150}).insertBefore($('#'+ settings.dropZoneId +' span'));});img.src=d;},error:function(){}});}
else
$('#'+ settings.dropZoneId +' img').remove();}};})(jQuery);(function($){$.fn.jScrollPane=function(settings){function JScrollPane(elem,s){var settings,jsp=this,pane,paneWidth,paneHeight,container,contentWidth,contentHeight,percentInViewH,percentInViewV,isScrollableV,isScrollableH,verticalDrag,dragMaxY,verticalDragPosition,horizontalDrag,dragMaxX,horizontalDragPosition,verticalBar,verticalTrack,scrollbarWidth,verticalTrackHeight,verticalDragHeight,arrowUp,arrowDown,horizontalBar,horizontalTrack,horizontalTrackWidth,horizontalDragWidth,arrowLeft,arrowRight,reinitialiseInterval,originalPadding,originalPaddingTotalWidth,previousContentWidth,wasAtTop=true,wasAtLeft=true,wasAtBottom=false,wasAtRight=false,originalElement=elem.clone(false,false).empty(),mwEvent=$.fn.mwheelIntent?'mwheelIntent.jsp':'mousewheel.jsp';originalPadding=elem.css('paddingTop')+' '+
elem.css('paddingRight')+' '+
elem.css('paddingBottom')+' '+
elem.css('paddingLeft');originalPaddingTotalWidth=(parseInt(elem.css('paddingLeft'),10)||0)+
(parseInt(elem.css('paddingRight'),10)||0);function initialise(s){var isMaintainingPositon,lastContentX,lastContentY,hasContainingSpaceChanged,originalScrollTop,originalScrollLeft,maintainAtBottom=false,maintainAtRight=false;settings=s;if(pane===undefined){originalScrollTop=elem.scrollTop();originalScrollLeft=elem.scrollLeft();elem.css({overflow:'hidden',padding:0});paneWidth=elem.innerWidth()+ originalPaddingTotalWidth;paneHeight=elem.innerHeight();elem.width(paneWidth);pane=$('<div class="jspPane" />').css('padding',originalPadding).append(elem.children());container=$('<div class="jspContainer" />').css({'width':paneWidth +'px','height':paneHeight +'px'}).append(pane).appendTo(elem);}else{elem.css('width','');maintainAtBottom=settings.stickToBottom&&isCloseToBottom();maintainAtRight=settings.stickToRight&&isCloseToRight();hasContainingSpaceChanged=elem.innerWidth()+ originalPaddingTotalWidth!=paneWidth||elem.outerHeight()!=paneHeight;if(hasContainingSpaceChanged){paneWidth=elem.innerWidth()+ originalPaddingTotalWidth;paneHeight=elem.innerHeight();container.css({width:paneWidth +'px',height:paneHeight +'px'});}
if(!hasContainingSpaceChanged&&previousContentWidth==contentWidth&&pane.outerHeight()==contentHeight){elem.width(paneWidth);return;}
previousContentWidth=contentWidth;pane.css('width','');elem.width(paneWidth);container.find('>.jspVerticalBar,>.jspHorizontalBar').remove().end();}
pane.css('overflow','auto');if(s.contentWidth){contentWidth=s.contentWidth;}else{contentWidth=pane[0].scrollWidth;}
contentHeight=pane[0].scrollHeight;pane.css('overflow','');percentInViewH=contentWidth/paneWidth;percentInViewV=contentHeight/paneHeight;isScrollableV=percentInViewV>1;isScrollableH=percentInViewH>1;if(!(isScrollableH||isScrollableV)){elem.removeClass('jspScrollable');pane.css({top:0,width:container.width()-originalPaddingTotalWidth});removeMousewheel();removeFocusHandler();removeKeyboardNav();removeClickOnTrack();}else{elem.addClass('jspScrollable');isMaintainingPositon=settings.maintainPosition&&(verticalDragPosition||horizontalDragPosition);if(isMaintainingPositon){lastContentX=contentPositionX();lastContentY=contentPositionY();}
initialiseVerticalScroll();initialiseHorizontalScroll();resizeScrollbars();if(isMaintainingPositon){scrollToX(maintainAtRight?(contentWidth-paneWidth):lastContentX,false);scrollToY(maintainAtBottom?(contentHeight-paneHeight):lastContentY,false);}
initFocusHandler();initMousewheel();initTouch();if(settings.enableKeyboardNavigation){initKeyboardNav();}
if(settings.clickOnTrack){initClickOnTrack();}
observeHash();if(settings.hijackInternalLinks){hijackInternalLinks();}}
if(settings.autoReinitialise&&!reinitialiseInterval){reinitialiseInterval=setInterval(function(){initialise(settings);},settings.autoReinitialiseDelay);}else if(!settings.autoReinitialise&&reinitialiseInterval){clearInterval(reinitialiseInterval);}
originalScrollTop&&elem.scrollTop(0)&&scrollToY(originalScrollTop,false);originalScrollLeft&&elem.scrollLeft(0)&&scrollToX(originalScrollLeft,false);elem.trigger('jsp-initialised',[isScrollableH||isScrollableV]);}
function initialiseVerticalScroll(){if(isScrollableV){container.append($('<div class="jspVerticalBar" />').append($('<div class="jspCap jspCapTop" />'),$('<div class="jspTrack" />').append($('<div class="jspDrag" />').append($('<div class="jspDragTop" />'),$('<div class="jspDragBottom" />'))),$('<div class="jspCap jspCapBottom" />')));verticalBar=container.find('>.jspVerticalBar');verticalTrack=verticalBar.find('>.jspTrack');verticalDrag=verticalTrack.find('>.jspDrag');if(settings.showArrows){arrowUp=$('<a class="jspArrow jspArrowUp" />').bind('mousedown.jsp',getArrowScroll(0,-1)).bind('click.jsp',nil);arrowDown=$('<a class="jspArrow jspArrowDown" />').bind('mousedown.jsp',getArrowScroll(0,1)).bind('click.jsp',nil);if(settings.arrowScrollOnHover){arrowUp.bind('mouseover.jsp',getArrowScroll(0,-1,arrowUp));arrowDown.bind('mouseover.jsp',getArrowScroll(0,1,arrowDown));}
appendArrows(verticalTrack,settings.verticalArrowPositions,arrowUp,arrowDown);}
verticalTrackHeight=paneHeight;container.find('>.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow').each(function(){verticalTrackHeight-=$(this).outerHeight();});verticalDrag.hover(function(){verticalDrag.addClass('jspHover');},function(){verticalDrag.removeClass('jspHover');}).bind('mousedown.jsp',function(e){$('html').bind('dragstart.jsp selectstart.jsp',nil);verticalDrag.addClass('jspActive');var startY=e.pageY-verticalDrag.position().top;$('html').bind('mousemove.jsp',function(e){positionDragY(e.pageY-startY,false);}).bind('mouseup.jsp mouseleave.jsp',cancelDrag);return false;});sizeVerticalScrollbar();}}
function sizeVerticalScrollbar(){verticalTrack.height(verticalTrackHeight +'px');verticalDragPosition=0;scrollbarWidth=settings.verticalGutter + verticalTrack.outerWidth();pane.width(paneWidth-scrollbarWidth-originalPaddingTotalWidth);try{if(verticalBar.position().left===0){pane.css('margin-left',scrollbarWidth +'px');}}catch(err){}}
function initialiseHorizontalScroll(){if(isScrollableH){container.append($('<div class="jspHorizontalBar" />').append($('<div class="jspCap jspCapLeft" />'),$('<div class="jspTrack" />').append($('<div class="jspDrag" />').append($('<div class="jspDragLeft" />'),$('<div class="jspDragRight" />'))),$('<div class="jspCap jspCapRight" />')));horizontalBar=container.find('>.jspHorizontalBar');horizontalTrack=horizontalBar.find('>.jspTrack');horizontalDrag=horizontalTrack.find('>.jspDrag');if(settings.showArrows){arrowLeft=$('<a class="jspArrow jspArrowLeft" />').bind('mousedown.jsp',getArrowScroll(-1,0)).bind('click.jsp',nil);arrowRight=$('<a class="jspArrow jspArrowRight" />').bind('mousedown.jsp',getArrowScroll(1,0)).bind('click.jsp',nil);if(settings.arrowScrollOnHover){arrowLeft.bind('mouseover.jsp',getArrowScroll(-1,0,arrowLeft));arrowRight.bind('mouseover.jsp',getArrowScroll(1,0,arrowRight));}
appendArrows(horizontalTrack,settings.horizontalArrowPositions,arrowLeft,arrowRight);}
horizontalDrag.hover(function(){horizontalDrag.addClass('jspHover');},function(){horizontalDrag.removeClass('jspHover');}).bind('mousedown.jsp',function(e){$('html').bind('dragstart.jsp selectstart.jsp',nil);horizontalDrag.addClass('jspActive');var startX=e.pageX-horizontalDrag.position().left;$('html').bind('mousemove.jsp',function(e){positionDragX(e.pageX-startX,false);}).bind('mouseup.jsp mouseleave.jsp',cancelDrag);return false;});horizontalTrackWidth=container.innerWidth();sizeHorizontalScrollbar();}}
function sizeHorizontalScrollbar(){container.find('>.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow').each(function(){horizontalTrackWidth-=$(this).outerWidth();});horizontalTrack.width(horizontalTrackWidth +'px');horizontalDragPosition=0;}
function resizeScrollbars(){if(isScrollableH&&isScrollableV){var horizontalTrackHeight=horizontalTrack.outerHeight(),verticalTrackWidth=verticalTrack.outerWidth();verticalTrackHeight-=horizontalTrackHeight;$(horizontalBar).find('>.jspCap:visible,>.jspArrow').each(function(){horizontalTrackWidth +=$(this).outerWidth();});horizontalTrackWidth-=verticalTrackWidth;paneHeight-=verticalTrackWidth;paneWidth-=horizontalTrackHeight;horizontalTrack.parent().append($('<div class="jspCorner" />').css('width',horizontalTrackHeight +'px'));sizeVerticalScrollbar();sizeHorizontalScrollbar();}
if(isScrollableH){pane.width((container.outerWidth()-originalPaddingTotalWidth)+'px');}
contentHeight=pane.outerHeight();percentInViewV=contentHeight/paneHeight;if(isScrollableH){horizontalDragWidth=Math.ceil(1/percentInViewH*horizontalTrackWidth);if(horizontalDragWidth>settings.horizontalDragMaxWidth){horizontalDragWidth=settings.horizontalDragMaxWidth;}else if(horizontalDragWidth<settings.horizontalDragMinWidth){horizontalDragWidth=settings.horizontalDragMinWidth;}
horizontalDrag.width(horizontalDragWidth +'px');dragMaxX=horizontalTrackWidth-horizontalDragWidth;_positionDragX(horizontalDragPosition);}
if(isScrollableV){verticalDragHeight=Math.ceil(1/percentInViewV*verticalTrackHeight);if(verticalDragHeight>settings.verticalDragMaxHeight){verticalDragHeight=settings.verticalDragMaxHeight;}else if(verticalDragHeight<settings.verticalDragMinHeight){verticalDragHeight=settings.verticalDragMinHeight;}
verticalDrag.height(verticalDragHeight +'px');dragMaxY=verticalTrackHeight-verticalDragHeight;_positionDragY(verticalDragPosition);}}
function appendArrows(ele,p,a1,a2){var p1="before",p2="after",aTemp;if(p=="os"){p=/Mac/.test(navigator.platform)?"after":"split";}
if(p==p1){p2=p;}else if(p==p2){p1=p;aTemp=a1;a1=a2;a2=aTemp;}
ele[p1](a1)[p2](a2);}
function getArrowScroll(dirX,dirY,ele){return function(){arrowScroll(dirX,dirY,this,ele);this.blur();return false;};}
function arrowScroll(dirX,dirY,arrow,ele){arrow=$(arrow).addClass('jspActive');var eve,scrollTimeout,isFirst=true,doScroll=function(){if(dirX!==0){jsp.scrollByX(dirX*settings.arrowButtonSpeed);}
if(dirY!==0){jsp.scrollByY(dirY*settings.arrowButtonSpeed);}
scrollTimeout=setTimeout(doScroll,isFirst?settings.initialDelay:settings.arrowRepeatFreq);isFirst=false;};doScroll();eve=ele?'mouseout.jsp':'mouseup.jsp';ele=ele||$('html');ele.bind(eve,function(){arrow.removeClass('jspActive');scrollTimeout&&clearTimeout(scrollTimeout);scrollTimeout=null;ele.unbind(eve);});}
function initClickOnTrack(){removeClickOnTrack();if(isScrollableV){verticalTrack.bind('mousedown.jsp',function(e){if(e.originalTarget===undefined||e.originalTarget==e.currentTarget){var clickedTrack=$(this),offset=clickedTrack.offset(),direction=e.pageY-offset.top-verticalDragPosition,scrollTimeout,isFirst=true,doScroll=function(){var offset=clickedTrack.offset(),pos=e.pageY-offset.top-verticalDragHeight/2,contentDragY=paneHeight*settings.scrollPagePercent,dragY=dragMaxY*contentDragY/(contentHeight-paneHeight);if(direction<0){if(verticalDragPosition-dragY>pos){jsp.scrollByY(-contentDragY);}else{positionDragY(pos);}}else if(direction>0){if(verticalDragPosition + dragY<pos){jsp.scrollByY(contentDragY);}else{positionDragY(pos);}}else{cancelClick();return;}
scrollTimeout=setTimeout(doScroll,isFirst?settings.initialDelay:settings.trackClickRepeatFreq);isFirst=false;},cancelClick=function(){scrollTimeout&&clearTimeout(scrollTimeout);scrollTimeout=null;$(document).unbind('mouseup.jsp',cancelClick);};doScroll();$(document).bind('mouseup.jsp',cancelClick);return false;}});}
if(isScrollableH){horizontalTrack.bind('mousedown.jsp',function(e){if(e.originalTarget===undefined||e.originalTarget==e.currentTarget){var clickedTrack=$(this),offset=clickedTrack.offset(),direction=e.pageX-offset.left-horizontalDragPosition,scrollTimeout,isFirst=true,doScroll=function(){var offset=clickedTrack.offset(),pos=e.pageX-offset.left-horizontalDragWidth/2,contentDragX=paneWidth*settings.scrollPagePercent,dragX=dragMaxX*contentDragX/(contentWidth-paneWidth);if(direction<0){if(horizontalDragPosition-dragX>pos){jsp.scrollByX(-contentDragX);}else{positionDragX(pos);}}else if(direction>0){if(horizontalDragPosition + dragX<pos){jsp.scrollByX(contentDragX);}else{positionDragX(pos);}}else{cancelClick();return;}
scrollTimeout=setTimeout(doScroll,isFirst?settings.initialDelay:settings.trackClickRepeatFreq);isFirst=false;},cancelClick=function(){scrollTimeout&&clearTimeout(scrollTimeout);scrollTimeout=null;$(document).unbind('mouseup.jsp',cancelClick);};doScroll();$(document).bind('mouseup.jsp',cancelClick);return false;}});}}
function removeClickOnTrack(){if(horizontalTrack){horizontalTrack.unbind('mousedown.jsp');}
if(verticalTrack){verticalTrack.unbind('mousedown.jsp');}}
function cancelDrag(){$('html').unbind('dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp');if(verticalDrag){verticalDrag.removeClass('jspActive');}
if(horizontalDrag){horizontalDrag.removeClass('jspActive');}}
function positionDragY(destY,animate){if(!isScrollableV){return;}
if(destY<0){destY=0;}else if(destY>dragMaxY){destY=dragMaxY;}
if(animate===undefined){animate=settings.animateScroll;}
if(animate){jsp.animate(verticalDrag,'top',destY,_positionDragY);}else{verticalDrag.css('top',destY);_positionDragY(destY);}}
function _positionDragY(destY){if(destY===undefined){destY=verticalDrag.position().top;}
container.scrollTop(0);verticalDragPosition=destY;var isAtTop=verticalDragPosition===0,isAtBottom=verticalDragPosition==dragMaxY,percentScrolled=destY/dragMaxY,destTop=-percentScrolled*(contentHeight-paneHeight);if(wasAtTop!=isAtTop||wasAtBottom!=isAtBottom){wasAtTop=isAtTop;wasAtBottom=isAtBottom;elem.trigger('jsp-arrow-change',[wasAtTop,wasAtBottom,wasAtLeft,wasAtRight]);}
updateVerticalArrows(isAtTop,isAtBottom);pane.css('top',destTop);elem.trigger('jsp-scroll-y',[-destTop,isAtTop,isAtBottom]).trigger('scroll');}
function positionDragX(destX,animate){if(!isScrollableH){return;}
if(destX<0){destX=0;}else if(destX>dragMaxX){destX=dragMaxX;}
if(animate===undefined){animate=settings.animateScroll;}
if(animate){jsp.animate(horizontalDrag,'left',destX,_positionDragX);}else{horizontalDrag.css('left',destX);_positionDragX(destX);}}
function _positionDragX(destX){if(destX===undefined){destX=horizontalDrag.position().left;}
container.scrollTop(0);horizontalDragPosition=destX;var isAtLeft=horizontalDragPosition===0,isAtRight=horizontalDragPosition==dragMaxX,percentScrolled=destX/dragMaxX,destLeft=-percentScrolled*(contentWidth-paneWidth);if(wasAtLeft!=isAtLeft||wasAtRight!=isAtRight){wasAtLeft=isAtLeft;wasAtRight=isAtRight;elem.trigger('jsp-arrow-change',[wasAtTop,wasAtBottom,wasAtLeft,wasAtRight]);}
updateHorizontalArrows(isAtLeft,isAtRight);pane.css('left',destLeft);elem.trigger('jsp-scroll-x',[-destLeft,isAtLeft,isAtRight]).trigger('scroll');}
function updateVerticalArrows(isAtTop,isAtBottom){if(settings.showArrows){arrowUp[isAtTop?'addClass':'removeClass']('jspDisabled');arrowDown[isAtBottom?'addClass':'removeClass']('jspDisabled');}}
function updateHorizontalArrows(isAtLeft,isAtRight){if(settings.showArrows){arrowLeft[isAtLeft?'addClass':'removeClass']('jspDisabled');arrowRight[isAtRight?'addClass':'removeClass']('jspDisabled');}}
function scrollToY(destY,animate){var percentScrolled=destY/(contentHeight-paneHeight);positionDragY(percentScrolled*dragMaxY,animate);}
function scrollToX(destX,animate){var percentScrolled=destX/(contentWidth-paneWidth);positionDragX(percentScrolled*dragMaxX,animate);}
function scrollToElement(ele,stickToTop,animate){var e,eleHeight,eleWidth,eleTop=0,eleLeft=0,viewportTop,viewportLeft,maxVisibleEleTop,maxVisibleEleLeft,destY,destX;try{e=$(ele);}catch(err){return;}
eleHeight=e.outerHeight();eleWidth=e.outerWidth();container.scrollTop(0);container.scrollLeft(0);while(!e.is('.jspPane')){eleTop +=e.position().top;eleLeft +=e.position().left;e=e.offsetParent();if(/^body|html$/i.test(e[0].nodeName)){return;}}
viewportTop=contentPositionY();maxVisibleEleTop=viewportTop + paneHeight;if(eleTop<viewportTop||stickToTop){destY=eleTop-settings.verticalGutter;}else if(eleTop + eleHeight>maxVisibleEleTop){destY=eleTop-paneHeight + eleHeight + settings.verticalGutter;}
if(destY){scrollToY(destY,animate);}
viewportLeft=contentPositionX();maxVisibleEleLeft=viewportLeft + paneWidth;if(eleLeft<viewportLeft||stickToTop){destX=eleLeft-settings.horizontalGutter;}else if(eleLeft + eleWidth>maxVisibleEleLeft){destX=eleLeft-paneWidth + eleWidth + settings.horizontalGutter;}
if(destX){scrollToX(destX,animate);}}
function contentPositionX(){return-pane.position().left;}
function contentPositionY(){return-pane.position().top;}
function isCloseToBottom(){var scrollableHeight=contentHeight-paneHeight;return(scrollableHeight>20)&&(scrollableHeight-contentPositionY()<10);}
function isCloseToRight(){var scrollableWidth=contentWidth-paneWidth;return(scrollableWidth>20)&&(scrollableWidth-contentPositionX()<10);}
function initMousewheel(){container.unbind(mwEvent).bind(mwEvent,function(event,delta,deltaX,deltaY){var dX=horizontalDragPosition,dY=verticalDragPosition;jsp.scrollBy(deltaX*settings.mouseWheelSpeed,-deltaY*settings.mouseWheelSpeed,false);return dX==horizontalDragPosition&&dY==verticalDragPosition;});}
function removeMousewheel(){container.unbind(mwEvent);}
function nil(){return false;}
function initFocusHandler(){pane.find(':input,a').unbind('focus.jsp').bind('focus.jsp',function(e){scrollToElement(e.target,false);});}
function removeFocusHandler(){pane.find(':input,a').unbind('focus.jsp');}
function initKeyboardNav(){var keyDown,elementHasScrolled,validParents=[];isScrollableH&&validParents.push(horizontalBar[0]);isScrollableV&&validParents.push(verticalBar[0]);pane.focus(function(){elem.focus();});elem.attr('tabindex',0).unbind('keydown.jsp keypress.jsp').bind('keydown.jsp',function(e){if(e.target!==this&&!(validParents.length&&$(e.target).closest(validParents).length)){return;}
var dX=horizontalDragPosition,dY=verticalDragPosition;switch(e.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:keyDown=e.keyCode;keyDownHandler();break;case 35:scrollToY(contentHeight-paneHeight);keyDown=null;break;case 36:scrollToY(0);keyDown=null;break;}
elementHasScrolled=e.keyCode==keyDown&&dX!=horizontalDragPosition||dY!=verticalDragPosition;return!elementHasScrolled;}).bind('keypress.jsp',function(e){if(e.keyCode==keyDown){keyDownHandler();}
return!elementHasScrolled;});if(settings.hideFocus){elem.css('outline','none');if('hideFocus'in container[0]){elem.attr('hideFocus',true);}}else{elem.css('outline','');if('hideFocus'in container[0]){elem.attr('hideFocus',false);}}
function keyDownHandler(){var dX=horizontalDragPosition,dY=verticalDragPosition;switch(keyDown){case 40:jsp.scrollByY(settings.keyboardSpeed,false);break;case 38:jsp.scrollByY(-settings.keyboardSpeed,false);break;case 34:case 32:jsp.scrollByY(paneHeight*settings.scrollPagePercent,false);break;case 33:jsp.scrollByY(-paneHeight*settings.scrollPagePercent,false);break;case 39:jsp.scrollByX(settings.keyboardSpeed,false);break;case 37:jsp.scrollByX(-settings.keyboardSpeed,false);break;}
elementHasScrolled=dX!=horizontalDragPosition||dY!=verticalDragPosition;return elementHasScrolled;}}
function removeKeyboardNav(){elem.attr('tabindex','-1').removeAttr('tabindex').unbind('keydown.jsp keypress.jsp');}
function observeHash(){if(location.hash&&location.hash.length>1){var e,retryInt,hash=escape(location.hash.substr(1));try{e=$('#'+ hash +', a[name="'+ hash +'"]');}catch(err){return;}
if(e.length&&pane.find(hash)){if(container.scrollTop()===0){retryInt=setInterval(function(){if(container.scrollTop()>0){scrollToElement(e,true);$(document).scrollTop(container.position().top);clearInterval(retryInt);}},50);}else{scrollToElement(e,true);$(document).scrollTop(container.position().top);}}}}
function hijackInternalLinks(){if($(document.body).data('jspHijack')){return;}
$(document.body).data('jspHijack',true);$(document.body).delegate('a[href*=#]','click',function(event){var href=this.href.substr(0,this.href.indexOf('#')),locationHref=location.href,hash,element,container,jsp,scrollTop,elementTop;if(location.href.indexOf('#')!==-1){locationHref=location.href.substr(0,location.href.indexOf('#'));}
if(href!==locationHref){return;}
hash=escape(this.href.substr(this.href.indexOf('#')+ 1));element;try{element=$('#'+ hash +', a[name="'+ hash +'"]');}catch(e){return;}
if(!element.length){return;}
container=element.closest('.jspScrollable');jsp=container.data('jsp');jsp.scrollToElement(element,true);if(container[0].scrollIntoView){scrollTop=$(window).scrollTop();elementTop=element.offset().top;if(elementTop<scrollTop||elementTop>scrollTop + $(window).height()){container[0].scrollIntoView();}}
event.preventDefault();});}
function initTouch(){var startX,startY,touchStartX,touchStartY,moved,moving=false;container.unbind('touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick').bind('touchstart.jsp',function(e){var touch=e.originalEvent.touches[0];startX=contentPositionX();startY=contentPositionY();touchStartX=touch.pageX;touchStartY=touch.pageY;moved=false;moving=true;}).bind('touchmove.jsp',function(ev){if(!moving){return;}
var touchPos=ev.originalEvent.touches[0],dX=horizontalDragPosition,dY=verticalDragPosition;jsp.scrollTo(startX + touchStartX-touchPos.pageX,startY + touchStartY-touchPos.pageY);moved=moved||Math.abs(touchStartX-touchPos.pageX)>5||Math.abs(touchStartY-touchPos.pageY)>5;return dX==horizontalDragPosition&&dY==verticalDragPosition;}).bind('touchend.jsp',function(e){moving=false;}).bind('click.jsp-touchclick',function(e){if(moved){moved=false;return false;}});}
function destroy(){var currentY=contentPositionY(),currentX=contentPositionX();elem.removeClass('jspScrollable').unbind('.jsp');elem.replaceWith(originalElement.append(pane.children()));originalElement.scrollTop(currentY);originalElement.scrollLeft(currentX);if(reinitialiseInterval){clearInterval(reinitialiseInterval);}}
$.extend(jsp,{reinitialise:function(s){s=$.extend({},settings,s);initialise(s);},scrollToElement:function(ele,stickToTop,animate){scrollToElement(ele,stickToTop,animate);},scrollTo:function(destX,destY,animate){scrollToX(destX,animate);scrollToY(destY,animate);},scrollToX:function(destX,animate){scrollToX(destX,animate);},scrollToY:function(destY,animate){scrollToY(destY,animate);},scrollToPercentX:function(destPercentX,animate){scrollToX(destPercentX*(contentWidth-paneWidth),animate);},scrollToPercentY:function(destPercentY,animate){scrollToY(destPercentY*(contentHeight-paneHeight),animate);},scrollBy:function(deltaX,deltaY,animate){jsp.scrollByX(deltaX,animate);jsp.scrollByY(deltaY,animate);},scrollByX:function(deltaX,animate){var destX=contentPositionX()+ Math[deltaX<0?'floor':'ceil'](deltaX),percentScrolled=destX/(contentWidth-paneWidth);positionDragX(percentScrolled*dragMaxX,animate);},scrollByY:function(deltaY,animate){var destY=contentPositionY()+ Math[deltaY<0?'floor':'ceil'](deltaY),percentScrolled=destY/(contentHeight-paneHeight);positionDragY(percentScrolled*dragMaxY,animate);},positionDragX:function(x,animate){positionDragX(x,animate);},positionDragY:function(y,animate){positionDragY(y,animate);},animate:function(ele,prop,value,stepCallback){var params={};params[prop]=value;ele.animate(params,{'duration':settings.animateDuration,'easing':settings.animateEase,'queue':false,'step':stepCallback});},getContentPositionX:function(){return contentPositionX();},getContentPositionY:function(){return contentPositionY();},getContentWidth:function(){return contentWidth;},getContentHeight:function(){return contentHeight;},getPercentScrolledX:function(){return contentPositionX()/(contentWidth-paneWidth);},getPercentScrolledY:function(){return contentPositionY()/(contentHeight-paneHeight);},getIsScrollableH:function(){return isScrollableH;},getIsScrollableV:function(){return isScrollableV;},getContentPane:function(){return pane;},scrollToBottom:function(animate){positionDragY(dragMaxY,animate);},hijackInternalLinks:$.noop,destroy:function(){destroy();}});initialise(s);}
settings=$.extend({},$.fn.jScrollPane.defaults,settings);$.each(['mouseWheelSpeed','arrowButtonSpeed','trackClickSpeed','keyboardSpeed'],function(){settings[this]=settings[this]||settings.speed;});return this.each(function(){var elem=$(this),jspApi=elem.data('jsp');if(jspApi){jspApi.reinitialise(settings);}else{$("script",elem).filter('[type="text/javascript"], :not([type])').remove();jspApi=new JScrollPane(elem,settings);elem.data('jsp',jspApi);}});};$.fn.jScrollPane.defaults={showArrows:false,maintainPosition:true,stickToBottom:false,stickToRight:false,clickOnTrack:true,autoReinitialise:false,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:undefined,animateScroll:false,animateDuration:300,animateEase:'linear',hijackInternalLinks:false,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:false,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:'split',horizontalArrowPositions:'split',enableKeyboardNavigation:true,hideFocus:false,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8};})(jQuery);(function($){$.fn.dnnSettingDropdown=function(){var clicked=function(){if($(this).hasClass('dnnButtonDropdown')){$(this).removeClass('dnnButtonDropdown').addClass('dnnButtonDropdown-clicked');$(this).next().show();}};var hideDropdown=function(){var btn=$(this).children(':first');if(btn.hasClass('dnnButtonDropdown-clicked')){btn.removeClass('dnnButtonDropdown-clicked').addClass('dnnButtonDropdown');btn.next().fadeOut();}};var hoverConfig={over:function(){},out:hideDropdown,timout:600};return $(this).each(function(){$(this).unbind('click',clicked).bind('click',clicked);$(this).parent().hoverIntent(hoverConfig);});};})(jQuery);(function($){$.fn.onEnter=function(fn){return this.each(function(){var $this=$(this);$this.bind('onEnter',fn);$this.keydown(function(e){if((e.which&&e.which===13)||(e.keyCode&&e.keyCode===13)){e.preventDefault();e.stopPropagation();$this.trigger('onEnter');}});});};})(jQuery);(function($){$.extend({onAjaxError:function(jqXhr,textStatus,errorThrown){var title,text;if(jqXhr&&jqXhr.status===401){dnnModal.show('../Login.aspx'+'?popUp=true',true,300,650,true,'');return;}
if(jqXhr&&jqXhr.responseText&&jqXhr.statusText){try{title=jqXhr.statusText +" ("+ jqXhr.status +")";text=JSON.parse(jqXhr.responseText).Message;}
catch(e){text=errorThrown;}}
$.dnnAlert({title:title||"Error",text:text||"Unknown error"});}});})(jQuery);(function($){var inputFocusFix=function(){var errorMsg=$(this).next();if(errorMsg.hasClass('dnnFormError'))
errorMsg.hide();};var throttle=null;var dnnInitCustomisedCtrls=function(){if(throttle!=null){clearTimeout(throttle);throttle=null;}
throttle=setTimeout(function(){$('input[type="checkbox"]').dnnCheckbox();$('input[type="radio"]').dnnCheckbox({cls:'dnnRadiobutton'});$('.dnnTooltip').dnnTooltip();$('input[type="text"], input[type="password"]').unbind('focus',inputFocusFix).bind('focus',inputFocusFix);$(':file').dnnFileInput();},200);};var saveRgDataDivScrollTop=function(){window.__rgDataDivScrollTopPersistArray=[];$('.rgDataDiv').each(function(){var $this=$(this);var ele=$this.get(0);if(ele.scrollPane){var api=ele.scrollPane.data('jsp');var y=api.getContentPositionY();window.__rgDataDivScrollTopPersistArray.push(y);}});};window.__rgDataDivScrollTopPersistArray=[];$(document).ajaxComplete(dnnInitCustomisedCtrls);Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(saveRgDataDivScrollTop);Sys.WebForms.PageRequestManager.getInstance().add_endRequest(dnnInitCustomisedCtrls);$(dnnInitCustomisedCtrls);})(jQuery);
;;;
var DNN_COL_DELIMITER=String.fromCharCode(16);var DNN_ROW_DELIMITER=String.fromCharCode(15);var __dnn_m_bPageLoaded=false;if(window.addEventListener){window.addEventListener("load",__dnn_Page_OnLoad,false)}else{window.attachEvent("onload",__dnn_Page_OnLoad)}function __dnn_ClientAPIEnabled(){return typeof(dnn)!="undefined"}function __dnn_Page_OnLoad(){if(__dnn_ClientAPIEnabled()){var sLoadHandlers=dnn.getVar("__dnn_pageload");if(sLoadHandlers!=null){eval(sLoadHandlers)}dnn.dom.attachEvent(window,"onscroll",__dnn_bodyscroll)}__dnn_m_bPageLoaded=true}function __dnn_KeyDown(iKeyCode,sFunc,e){if(e==null){e=window.event}if(e.keyCode==iKeyCode){eval(unescape(sFunc));return false}}function __dnn_bodyscroll(){var a=document.forms[0];if(__dnn_ClientAPIEnabled()&&__dnn_m_bPageLoaded&&typeof(a.ScrollTop)!="undefined"){a.ScrollTop.value=document.documentElement.scrollTop?document.documentElement.scrollTop:dnn.dom.getByTagName("body")[0].scrollTop}}function __dnn_setScrollTop(c){if(__dnn_ClientAPIEnabled()){if(c==null){c=document.forms[0].ScrollTop.value}var a=dnn.getVar("ScrollToControl");if(a!=null&&a.length>0){var b=dnn.dom.getById(a);if(b!=null){c=dnn.dom.positioning.elementTop(b);dnn.setVar("ScrollToControl","")}}if(document.getElementsByTagName("html")[0].style.overflow!="hidden"){window.scrollTo(0,c)}}}function __dnn_SetInitialFocus(a){var b=dnn.dom.getById(a);if(b!=null&&__dnn_CanReceiveFocus(b)){b.focus()}}function __dnn_CanReceiveFocus(b){if(b.style.display!="none"&&b.tabIndex>-1&&b.disabled==false&&b.style.visible!="hidden"){var a=b.parentElement;while(a!=null&&a.tagName!="BODY"){if(a.style.display=="none"||a.disabled||a.style.visible=="hidden"){return false}a=a.parentElement}return true}else{return false}}function __dnn_ContainerMaxMin_OnClick(i,b){var g=dnn.dom.getById(b);if(g!=null){var e=i.childNodes[0];var l=dnn.getVar("containerid_"+b);var j=dnn.getVar("cookieid_"+b);var d=e.src.toLowerCase().substr(e.src.lastIndexOf("/"));var a;var h;var k;if(dnn.getVar("min_icon_"+l)){k=dnn.getVar("min_icon_"+l)}else{k=dnn.getVar("min_icon")}if(dnn.getVar("max_icon_"+l)){h=dnn.getVar("max_icon_"+l)}else{h=dnn.getVar("max_icon")}a=h.toLowerCase().substr(h.lastIndexOf("/"));var c=5;var f=dnn.getVar("animf_"+b);if(f!=null){c=new Number(f)}if(d==a){e.src=k;dnn.dom.expandElement(g,c);e.title=dnn.getVar("min_text");if(j!=null){if(dnn.getVar("__dnn_"+l+":defminimized")=="true"){dnn.dom.setCookie(j,"true",365)}else{dnn.dom.deleteCookie(j)}}else{dnn.setVar("__dnn_"+l+"_Visible","true")}}else{e.src=h;dnn.dom.collapseElement(g,c);e.title=dnn.getVar("max_text");if(j!=null){if(dnn.getVar("__dnn_"+l+":defminimized")=="true"){dnn.dom.deleteCookie(j)}else{dnn.dom.setCookie(j,"false",365)}}else{dnn.setVar("__dnn_"+l+"_Visible","false")}}return true}return false}function __dnn_Help_OnClick(a){var b=dnn.dom.getById(a);if(b!=null){if(b.style.display=="none"){b.style.display=""}else{b.style.display="none"}return true}return false}function __dnn_SectionMaxMin(f,c){var d=dnn.dom.getById(c);if(d!=null){var g=f.getAttribute("max_icon");var e=f.getAttribute("min_icon");var a=f.getAttribute("userctr")!=null;var b;if(d.style.display=="none"){f.src=e;d.style.display="";if(a){b="True"}else{dnn.setVar(f.id+":exp",1)}}else{f.src=g;d.style.display="none";if(a){b="False"}else{dnn.setVar(f.id+":exp",0)}}if(a){dnncore.setUserProp(f.getAttribute("userctr"),f.getAttribute("userkey"),b,null)}return true}return false}function __dnn_enableDragDrop(){var b=dnn.getVar("__dnn_dragDrop").split(";");var e;for(var c=0;c<b.length;c++){e=b[c].split(" ");if(e[0].length>0){var a=dnn.dom.getById(e[0]);var d=dnn.dom.getById(e[1]);if(a!=null&&d!=null){a.setAttribute("moduleid",e[2]);dnn.dom.positioning.enableDragAndDrop(a,d,"__dnn_dragComplete()","__dnn_dragOver()")}}}}var __dnn_oPrevSelPane;var __dnn_oPrevSelModule;var __dnn_dragEventCount=0;function __dnn_dragOver(){__dnn_dragEventCount++;if(__dnn_dragEventCount%75!=0){return}var c=dnn.dom.getById(dnn.dom.positioning.dragCtr.contID);var a=__dnn_getMostSelectedPane(dnn.dom.positioning.dragCtr);if(__dnn_oPrevSelPane!=null){__dnn_oPrevSelPane.pane.style.border=__dnn_oPrevSelPane.origBorder}if(a!=null){__dnn_oPrevSelPane=a;a.pane.style.border="4px double "+DNN_HIGHLIGHT_COLOR;var e=__dnn_getPaneControlIndex(c,a);var b;var f;for(var d=0;d<a.controls.length;d++){if(e>d&&a.controls[d].id!=c.id){b=a.controls[d]}if(e<=d&&a.controls[d].id!=c.id){f=a.controls[d];break}}if(__dnn_oPrevSelModule!=null){dnn.dom.getNonTextNode(__dnn_oPrevSelModule.control).style.border=__dnn_oPrevSelModule.origBorder}if(f!=null){__dnn_oPrevSelModule=f;dnn.dom.getNonTextNode(f.control).style.borderTop="5px groove "+DNN_HIGHLIGHT_COLOR}else{if(b!=null){__dnn_oPrevSelModule=b;dnn.dom.getNonTextNode(b.control).style.borderBottom="5px groove "+DNN_HIGHLIGHT_COLOR}}}}function __dnn_dragComplete(){var f=dnn.dom.getById(dnn.dom.positioning.dragCtr.contID);var d=f.getAttribute("moduleid");if(__dnn_oPrevSelPane!=null){__dnn_oPrevSelPane.pane.style.border=__dnn_oPrevSelPane.origBorder}if(__dnn_oPrevSelModule!=null){dnn.dom.getNonTextNode(__dnn_oPrevSelModule.control).style.border=__dnn_oPrevSelModule.origBorder}var b=__dnn_getMostSelectedPane(dnn.dom.positioning.dragCtr);var e;if(b==null){var a=__dnn_Panes();for(var c=0;c<a.length;c++){if(a[c].id==f.parentNode.id){b=a[c]}}}if(b!=null){e=__dnn_getPaneControlIndex(f,b);__dnn_MoveToPane(b,f,e);dnn.callPostBack("MoveToPane","moduleid="+d,"pane="+b.paneName,"order="+e*2)}}function __dnn_MoveToPane(a,e,d){if(a!=null){var c=new Array();for(var b=d;b<a.controls.length;b++){if(a.controls[b].control.id!=e.id){c[c.length]=a.controls[b].control}dnn.dom.removeChild(a.controls[b].control)}dnn.dom.appendChild(a.pane,e);e.style.top=0;e.style.left=0;e.style.position="relative";for(var b=0;b<c.length;b++){dnn.dom.appendChild(a.pane,c[b])}__dnn_RefreshPanes()}else{e.style.top=0;e.style.left=0;e.style.position="relative"}}function __dnn_RefreshPanes(){var b=dnn.getVar("__dnn_Panes").split(";");var a=dnn.getVar("__dnn_PaneNames").split(";");__dnn_m_aryPanes=new Array();for(var c=0;c<b.length;c++){if(b[c].length>0){__dnn_m_aryPanes[__dnn_m_aryPanes.length]=new __dnn_Pane(dnn.dom.getById(b[c]),a[c])}}}var __dnn_m_aryPanes;var __dnn_m_aryModules;function __dnn_Panes(){if(__dnn_m_aryPanes==null){__dnn_m_aryPanes=new Array();__dnn_RefreshPanes()}return __dnn_m_aryPanes}function __dnn_Modules(a){if(__dnn_m_aryModules==null){__dnn_RefreshPanes()}return __dnn_m_aryModules[a]}function __dnn_getMostSelectedPane(g){var c=new dnn.dom.positioning.dims(g);var f=0;var a;var h;for(var e=0;e<__dnn_Panes().length;e++){var b=__dnn_Panes()[e];var d=new dnn.dom.positioning.dims(b.pane);a=dnn.dom.positioning.elementOverlapScore(d,c);if(a>f){f=a;h=b}}return h}function __dnn_getPaneControlIndex(f,b){if(b==null){return}var a=new dnn.dom.positioning.dims(f);var e;if(b.controls.length==0){return 0}for(var c=0;c<b.controls.length;c++){e=b.controls[c];var d=new dnn.dom.positioning.dims(e.control);if(a.t<d.t){return e.index}}if(e!=null){return e.index+1}else{return 0}}function __dnn_Pane(a,b){this.pane=a;this.id=a.id;this.controls=new Array();this.origBorder=a.style.border;this.paneName=b;var f=0;var e="";for(var d=0;d<a.childNodes.length;d++){var g=a.childNodes[d];if(dnn.dom.isNonTextNode(g)){if(__dnn_m_aryModules==null){__dnn_m_aryModules=new Array()}var c=g.getAttribute("moduleid");if(c!=null&&c.length>0){e+=c+"~";this.controls[this.controls.length]=new __dnn_PaneControl(g,f);__dnn_m_aryModules[c]=g.id;f+=1}}}this.moduleOrder=e}function __dnn_PaneControl(a,b){this.control=a;this.id=a.id;this.index=b;this.origBorder=a.style.border}function __dnn_ShowModalPage(a){dnnModal.show(a,true,550,950,true,"")}function __dnncore(){this.GetUserVal=0;this.SetUserVal=1}__dnncore.prototype={getUserProp:function(b,c,a){this._doUserCallBack(dnncore.GetUserVal,b,c,null,new dnncore.UserPropArgs(b,c,a))},setUserProp:function(c,d,a,b){this._doUserCallBack(dnncore.SetUserVal,c,d,a,new dnncore.UserPropArgs(c,d,b))},_doUserCallBack:function(c,d,e,a,b){if(dnn&&dnn.xmlhttp){var f=c+COL_DELIMITER+d+COL_DELIMITER+e+COL_DELIMITER+a;dnn.xmlhttp.doCallBack("__Page",f,dnncore._callBackSuccess,b,dnncore._callBackFail,null,true,null,0)}else{alert("Client Personalization not enabled")}},_callBackSuccess:function(a,b,c){if(b.pFunc){b.pFunc(b.namingCtr,b.key,a)}},_callBackFail:function(a,b){window.status=a}};__dnncore.prototype.UserPropArgs=function(b,c,a){this.namingCtr=b;this.key=c;this.pFunc=a};var dnncore=new __dnncore();
;;;
(function(au,k){var Q={version:"3.0.3"};var J=navigator.userAgent.toLowerCase();if(J.indexOf("windows")>-1||J.indexOf("win32")>-1){Q.isWindows=true}else{if(J.indexOf("macintosh")>-1||J.indexOf("mac os x")>-1){Q.isMac=true}else{if(J.indexOf("linux")>-1){Q.isLinux=true}}}Q.isIE=J.indexOf("msie")>-1;Q.isIE6=J.indexOf("msie 6")>-1;Q.isIE7=J.indexOf("msie 7")>-1;Q.isGecko=J.indexOf("gecko")>-1&&J.indexOf("safari")==-1;Q.isWebKit=J.indexOf("applewebkit/")>-1;var ab=/#(.+)$/,af=/^(light|shadow)box\[(.*?)\]/i,az=/\s*([a-z_]*?)\s*=\s*(.+)\s*/,f=/[0-9a-z]+$/i,aD=/(.+\/)shadowbox\.js/i;var A=false,a=false,l={},z=0,R,ap;Q.current=-1;Q.dimensions=null;Q.ease=function(K){return 1+Math.pow(K-1,3)};Q.errorInfo={fla:{name:"Flash",url:"http://www.adobe.com/products/flashplayer/"},qt:{name:"QuickTime",url:"http://www.apple.com/quicktime/download/"},wmp:{name:"Windows Media Player",url:"http://www.microsoft.com/windows/windowsmedia/"},f4m:{name:"Flip4Mac",url:"http://www.flip4mac.com/wmv_download.htm"}};Q.gallery=[];Q.onReady=aj;Q.path=null;Q.player=null;Q.playerId="sb-player";Q.options={animate:true,animateFade:true,autoplayMovies:true,continuous:false,enableKeys:true,flashParams:{bgcolor:"#000000",allowfullscreen:true},flashVars:{},flashVersion:"9.0.115",handleOversize:"resize",handleUnsupported:"link",onChange:aj,onClose:aj,onFinish:aj,onOpen:aj,showMovieControls:true,skipSetup:false,slideshowDelay:0,viewportPadding:20};Q.getCurrent=function(){return Q.current>-1?Q.gallery[Q.current]:null};Q.hasNext=function(){return Q.gallery.length>1&&(Q.current!=Q.gallery.length-1||Q.options.continuous)};Q.isOpen=function(){return A};Q.isPaused=function(){return ap=="pause"};Q.applyOptions=function(K){l=aC({},Q.options);aC(Q.options,K)};Q.revertOptions=function(){aC(Q.options,l)};Q.init=function(aG,aJ){if(a){return}a=true;if(Q.skin.options){aC(Q.options,Q.skin.options)}if(aG){aC(Q.options,aG)}if(!Q.path){var aI,S=document.getElementsByTagName("script");for(var aH=0,K=S.length;aH<K;++aH){aI=aD.exec(S[aH].src);if(aI){Q.path=aI[1];break}}}if(aJ){Q.onReady=aJ}P()};Q.open=function(S){if(A){return}var K=Q.makeGallery(S);Q.gallery=K[0];Q.current=K[1];S=Q.getCurrent();if(S==null){return}Q.applyOptions(S.options||{});G();if(Q.gallery.length){S=Q.getCurrent();if(Q.options.onOpen(S)===false){return}A=true;Q.skin.onOpen(S,c)}};Q.close=function(){if(!A){return}A=false;if(Q.player){Q.player.remove();Q.player=null}if(typeof ap=="number"){clearTimeout(ap);ap=null}z=0;aq(false);Q.options.onClose(Q.getCurrent());Q.skin.onClose();Q.revertOptions()};Q.play=function(){if(!Q.hasNext()){return}if(!z){z=Q.options.slideshowDelay*1000}if(z){R=aw();ap=setTimeout(function(){z=R=0;Q.next()},z);if(Q.skin.onPlay){Q.skin.onPlay()}}};Q.pause=function(){if(typeof ap!="number"){return}z=Math.max(0,z-(aw()-R));if(z){clearTimeout(ap);ap="pause";if(Q.skin.onPause){Q.skin.onPause()}}};Q.change=function(K){if(!(K in Q.gallery)){if(Q.options.continuous){K=(K<0?Q.gallery.length+K:0);if(!(K in Q.gallery)){return}}else{return}}Q.current=K;if(typeof ap=="number"){clearTimeout(ap);ap=null;z=R=0}Q.options.onChange(Q.getCurrent());c(true)};Q.next=function(){Q.change(Q.current+1)};Q.previous=function(){Q.change(Q.current-1)};Q.setDimensions=function(aS,aJ,aQ,aR,aI,K,aO,aL){var aN=aS,aH=aJ;var aM=2*aO+aI;if(aS+aM>aQ){aS=aQ-aM}var aG=2*aO+K;if(aJ+aG>aR){aJ=aR-aG}var S=(aN-aS)/aN,aP=(aH-aJ)/aH,aK=(S>0||aP>0);if(aL&&aK){if(S>aP){aJ=Math.round((aH/aN)*aS)}else{if(aP>S){aS=Math.round((aN/aH)*aJ)}}}Q.dimensions={height:aS+aI,width:aJ+K,innerHeight:aS,innerWidth:aJ,top:Math.floor((aQ-(aS+aM))/2+aO),left:Math.floor((aR-(aJ+aG))/2+aO),oversized:aK};return Q.dimensions};Q.makeGallery=function(aI){var K=[],aH=-1;if(typeof aI=="string"){aI=[aI]}if(typeof aI.length=="number"){aF(aI,function(aK,aL){if(aL.content){K[aK]=aL}else{K[aK]={content:aL}}});aH=0}else{if(aI.tagName){var S=Q.getCache(aI);aI=S?S:Q.makeObject(aI)}if(aI.gallery){K=[];var aJ;for(var aG in Q.cache){aJ=Q.cache[aG];if(aJ.gallery&&aJ.gallery==aI.gallery){if(aH==-1&&aJ.content==aI.content){aH=K.length}K.push(aJ)}}if(aH==-1){K.unshift(aI);aH=0}}else{K=[aI];aH=0}}aF(K,function(aK,aL){K[aK]=aC({},aL)});return[K,aH]};Q.makeObject=function(aH,aG){var aI={content:aH.href,title:aH.getAttribute("title")||"",link:aH};if(aG){aG=aC({},aG);aF(["player","title","height","width","gallery"],function(aJ,aK){if(typeof aG[aK]!="undefined"){aI[aK]=aG[aK];delete aG[aK]}});aI.options=aG}else{aI.options={}}if(!aI.player){aI.player=Q.getPlayer(aI.content)}var K=aH.getAttribute("rel");if(K){var S=K.match(af);if(S){aI.gallery=escape(S[2])}aF(K.split(";"),function(aJ,aK){S=aK.match(az);if(S){aI[S[1]]=S[2]}})}return aI};Q.getPlayer=function(aG){if(aG.indexOf("#")>-1&&aG.indexOf(document.location.href)==0){return"inline"}var aH=aG.indexOf("?");if(aH>-1){aG=aG.substring(0,aH)}var S,K=aG.match(f);if(K){S=K[0].toLowerCase()}if(S){if(Q.img&&Q.img.ext.indexOf(S)>-1){return"img"}if(Q.swf&&Q.swf.ext.indexOf(S)>-1){return"swf"}if(Q.flv&&Q.flv.ext.indexOf(S)>-1){return"flv"}if(Q.qt&&Q.qt.ext.indexOf(S)>-1){if(Q.wmp&&Q.wmp.ext.indexOf(S)>-1){return"qtwmp"}else{return"qt"}}if(Q.wmp&&Q.wmp.ext.indexOf(S)>-1){return"wmp"}}return"iframe"};function G(){var aH=Q.errorInfo,aI=Q.plugins,aK,aL,aO,aG,aN,S,aM,K;for(var aJ=0;aJ<Q.gallery.length;++aJ){aK=Q.gallery[aJ];aL=false;aO=null;switch(aK.player){case"flv":case"swf":if(!aI.fla){aO="fla"}break;case"qt":if(!aI.qt){aO="qt"}break;case"wmp":if(Q.isMac){if(aI.qt&&aI.f4m){aK.player="qt"}else{aO="qtf4m"}}else{if(!aI.wmp){aO="wmp"}}break;case"qtwmp":if(aI.qt){aK.player="qt"}else{if(aI.wmp){aK.player="wmp"}else{aO="qtwmp"}}break}if(aO){if(Q.options.handleUnsupported=="link"){switch(aO){case"qtf4m":aN="shared";S=[aH.qt.url,aH.qt.name,aH.f4m.url,aH.f4m.name];break;case"qtwmp":aN="either";S=[aH.qt.url,aH.qt.name,aH.wmp.url,aH.wmp.name];break;default:aN="single";S=[aH[aO].url,aH[aO].name]}aK.player="html";aK.content='<div class="sb-message">'+s(Q.lang.errors[aN],S)+"</div>"}else{aL=true}}else{if(aK.player=="inline"){aG=ab.exec(aK.content);if(aG){aM=ad(aG[1]);if(aM){aK.content=aM.innerHTML}else{aL=true}}else{aL=true}}else{if(aK.player=="swf"||aK.player=="flv"){K=(aK.options&&aK.options.flashVersion)||Q.options.flashVersion;if(Q.flash&&!Q.flash.hasFlashPlayerVersion(K)){aK.width=310;aK.height=177}}}}if(aL){Q.gallery.splice(aJ,1);if(aJ<Q.current){--Q.current}else{if(aJ==Q.current){Q.current=aJ>0?aJ-1:aJ}}--aJ}}}function aq(K){if(!Q.options.enableKeys){return}(K?F:M)(document,"keydown",an)}function an(aG){if(aG.metaKey||aG.shiftKey||aG.altKey||aG.ctrlKey){return}var S=v(aG),K;switch(S){case 81:case 88:case 27:K=Q.close;break;case 37:K=Q.previous;break;case 39:K=Q.next;break;case 32:K=typeof ap=="number"?Q.pause:Q.play;break}if(K){n(aG);K()}}function c(aK){aq(false);var aJ=Q.getCurrent();var aG=(aJ.player=="inline"?"html":aJ.player);if(typeof Q[aG]!="function"){throw"unknown player "+aG}if(aK){Q.player.remove();Q.revertOptions();Q.applyOptions(aJ.options||{})}Q.player=new Q[aG](aJ,Q.playerId);if(Q.gallery.length>1){var aH=Q.gallery[Q.current+1]||Q.gallery[0];if(aH.player=="img"){var S=new Image();S.src=aH.content}var aI=Q.gallery[Q.current-1]||Q.gallery[Q.gallery.length-1];if(aI.player=="img"){var K=new Image();K.src=aI.content}}Q.skin.onLoad(aK,W)}function W(){if(!A){return}if(typeof Q.player.ready!="undefined"){var K=setInterval(function(){if(A){if(Q.player.ready){clearInterval(K);K=null;Q.skin.onReady(e)}}else{clearInterval(K);K=null}},10)}else{Q.skin.onReady(e)}}function e(){if(!A){return}Q.player.append(Q.skin.body,Q.dimensions);Q.skin.onShow(I)}function I(){if(!A){return}if(Q.player.onLoad){Q.player.onLoad()}Q.options.onFinish(Q.getCurrent());if(!Q.isPaused()){Q.play()}aq(true)}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(S,aG){var K=this.length>>>0;aG=aG||0;if(aG<0){aG+=K}for(;aG<K;++aG){if(aG in this&&this[aG]===S){return aG}}return-1}}function aw(){return(new Date).getTime()}function aC(K,aG){for(var S in aG){K[S]=aG[S]}return K}function aF(aH,aI){var S=0,K=aH.length;for(var aG=aH[0];S<K&&aI.call(aG,S,aG)!==false;aG=aH[++S]){}}function s(S,K){return S.replace(/\{(\w+?)\}/g,function(aG,aH){return K[aH]})}function aj(){}function ad(K){return document.getElementById(K)}function C(K){K.parentNode.removeChild(K)}var h=true,x=true;function d(){var K=document.body,S=document.createElement("div");h=typeof S.style.opacity==="string";S.style.position="fixed";S.style.margin=0;S.style.top="20px";K.appendChild(S,K.firstChild);x=S.offsetTop==20;K.removeChild(S)}Q.getStyle=(function(){var K=/opacity=([^)]*)/,S=document.defaultView&&document.defaultView.getComputedStyle;return function(aJ,aI){var aH;if(!h&&aI=="opacity"&&aJ.currentStyle){aH=K.test(aJ.currentStyle.filter||"")?(parseFloat(RegExp.$1)/100)+"":"";return aH===""?"1":aH}if(S){var aG=S(aJ,null);if(aG){aH=aG[aI]}if(aI=="opacity"&&aH==""){aH="1"}}else{aH=aJ.currentStyle[aI]}return aH}})();Q.appendHTML=function(aG,S){if(aG.insertAdjacentHTML){aG.insertAdjacentHTML("BeforeEnd",S)}else{if(aG.lastChild){var K=aG.ownerDocument.createRange();K.setStartAfter(aG.lastChild);var aH=K.createContextualFragment(S);aG.appendChild(aH)}else{aG.innerHTML=S}}};Q.getWindowSize=function(K){if(document.compatMode==="CSS1Compat"){return document.documentElement["client"+K]}return document.body["client"+K]};Q.setOpacity=function(aG,K){var S=aG.style;if(h){S.opacity=(K==1?"":K)}else{S.zoom=1;if(K==1){if(typeof S.filter=="string"&&(/alpha/i).test(S.filter)){S.filter=S.filter.replace(/\s*[\w\.]*alpha\([^\)]*\);?/gi,"")}}else{S.filter=(S.filter||"").replace(/\s*[\w\.]*alpha\([^\)]*\)/gi,"")+" alpha(opacity="+(K*100)+")"}}};Q.clearOpacity=function(K){Q.setOpacity(K,1)};function o(K){return K.target}function V(K){return[K.pageX,K.pageY]}function n(K){K.preventDefault()}function v(K){return K.keyCode}function F(aG,S,K){jQuery(aG).bind(S,K)}function M(aG,S,K){jQuery(aG).unbind(S,K)}jQuery.fn.shadowbox=function(K){return this.each(function(){var aG=jQuery(this);var aH=jQuery.extend({},K||{},jQuery.metadata?aG.metadata():jQuery.meta?aG.data():{});var S=this.className||"";aH.width=parseInt((S.match(/w:(\d+)/)||[])[1])||aH.width;aH.height=parseInt((S.match(/h:(\d+)/)||[])[1])||aH.height;Shadowbox.setup(aG,aH)})};var y=false,al;if(document.addEventListener){al=function(){document.removeEventListener("DOMContentLoaded",al,false);Q.load()}}else{if(document.attachEvent){al=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",al);Q.load()}}}}function g(){if(y){return}try{document.documentElement.doScroll("left")}catch(K){setTimeout(g,1);return}Q.load()}function P(){if(document.readyState==="complete"){return Q.load()}if(document.addEventListener){document.addEventListener("DOMContentLoaded",al,false);au.addEventListener("load",Q.load,false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",al);au.attachEvent("onload",Q.load);var K=false;try{K=au.frameElement===null}catch(S){}if(document.documentElement.doScroll&&K){g()}}}}Q.load=function(){if(y){return}if(!document.body){return setTimeout(Q.load,13)}y=true;d();Q.onReady();if(!Q.options.skipSetup){Q.setup()}Q.skin.init()};Q.plugins={};if(navigator.plugins&&navigator.plugins.length){var w=[];aF(navigator.plugins,function(K,S){w.push(S.name)});w=w.join(",");var ai=w.indexOf("Flip4Mac")>-1;Q.plugins={fla:w.indexOf("Shockwave Flash")>-1,qt:w.indexOf("QuickTime")>-1,wmp:!ai&&w.indexOf("Windows Media")>-1,f4m:ai}}else{var p=function(K){var S;try{S=new ActiveXObject(K)}catch(aG){}return!!S};Q.plugins={fla:p("ShockwaveFlash.ShockwaveFlash"),qt:p("QuickTime.QuickTime"),wmp:p("wmplayer.ocx"),f4m:false}}var X=/^(light|shadow)box/i,am="shadowboxCacheKey",b=1;Q.cache={};Q.select=function(S){var aG=[];if(!S){var K;aF(document.getElementsByTagName("a"),function(aJ,aK){K=aK.getAttribute("rel");if(K&&X.test(K)){aG.push(aK)}})}else{var aI=S.length;if(aI){if(typeof S=="string"){if(Q.find){aG=Q.find(S)}}else{if(aI==2&&typeof S[0]=="string"&&S[1].nodeType){if(Q.find){aG=Q.find(S[0],S[1])}}else{for(var aH=0;aH<aI;++aH){aG[aH]=S[aH]}}}}else{aG.push(S)}}return aG};Q.setup=function(K,S){aF(Q.select(K),function(aG,aH){Q.addCache(aH,S)})};Q.teardown=function(K){aF(Q.select(K),function(S,aG){Q.removeCache(aG)})};Q.addCache=function(aG,K){var S=aG[am];if(S==k){S=b++;aG[am]=S;F(aG,"click",u)}Q.cache[S]=Q.makeObject(aG,K)};Q.removeCache=function(K){M(K,"click",u);delete Q.cache[K[am]];K[am]=null};Q.getCache=function(S){var K=S[am];return(K in Q.cache&&Q.cache[K])};Q.clearCache=function(){for(var K in Q.cache){Q.removeCache(Q.cache[K].link)}Q.cache={}};function u(K){Q.open(this);if(Q.gallery.length){n(K)}}
Q.find=(function(){var aP=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,aQ=0,aS=Object.prototype.toString,aK=false,aJ=true;[0,0].sort(function(){aJ=false;return 0});var aG=function(a1,aW,a4,a5){a4=a4||[];var a7=aW=aW||document;if(aW.nodeType!==1&&aW.nodeType!==9){return[]}if(!a1||typeof a1!=="string"){return a4}var a2=[],aY,a9,bc,aX,a0=true,aZ=aH(aW),a6=a1;while((aP.exec(""),aY=aP.exec(a6))!==null){a6=aY[3];a2.push(aY[1]);if(aY[2]){aX=aY[3];break}}if(a2.length>1&&aL.exec(a1)){if(a2.length===2&&aM.relative[a2[0]]){a9=aT(a2[0]+a2[1],aW)}else{a9=aM.relative[a2[0]]?[aW]:aG(a2.shift(),aW);while(a2.length){a1=a2.shift();if(aM.relative[a1]){a1+=a2.shift()}a9=aT(a1,a9)}}}else{if(!a5&&a2.length>1&&aW.nodeType===9&&!aZ&&aM.match.ID.test(a2[0])&&!aM.match.ID.test(a2[a2.length-1])){var a8=aG.find(a2.shift(),aW,aZ);aW=a8.expr?aG.filter(a8.expr,a8.set)[0]:a8.set[0]}if(aW){var a8=a5?{expr:a2.pop(),set:aO(a5)}:aG.find(a2.pop(),a2.length===1&&(a2[0]==="~"||a2[0]==="+")&&aW.parentNode?aW.parentNode:aW,aZ);a9=a8.expr?aG.filter(a8.expr,a8.set):a8.set;if(a2.length>0){bc=aO(a9)}else{a0=false}while(a2.length){var bb=a2.pop(),ba=bb;if(!aM.relative[bb]){bb=""}else{ba=a2.pop()}if(ba==null){ba=aW}aM.relative[bb](bc,ba,aZ)}}else{bc=a2=[]}}if(!bc){bc=a9}if(!bc){throw"Syntax error, unrecognized expression: "+(bb||a1)}if(aS.call(bc)==="[object Array]"){if(!a0){a4.push.apply(a4,bc)}else{if(aW&&aW.nodeType===1){for(var a3=0;bc[a3]!=null;a3++){if(bc[a3]&&(bc[a3]===true||bc[a3].nodeType===1&&aN(aW,bc[a3]))){a4.push(a9[a3])}}}else{for(var a3=0;bc[a3]!=null;a3++){if(bc[a3]&&bc[a3].nodeType===1){a4.push(a9[a3])}}}}}else{aO(bc,a4)}if(aX){aG(aX,a7,a4,a5);aG.uniqueSort(a4)}return a4};aG.uniqueSort=function(aX){if(aR){aK=aJ;aX.sort(aR);if(aK){for(var aW=1;aW<aX.length;aW++){if(aX[aW]===aX[aW-1]){aX.splice(aW--,1)}}}}return aX};aG.matches=function(aW,aX){return aG(aW,null,null,aX)};aG.find=function(a3,aW,a4){var a2,a0;if(!a3){return[]}for(var aZ=0,aY=aM.order.length;aZ<aY;aZ++){var a1=aM.order[aZ],a0;if((a0=aM.leftMatch[a1].exec(a3))){var aX=a0[1];a0.splice(1,1);if(aX.substr(aX.length-1)!=="\\"){a0[1]=(a0[1]||"").replace(/\\/g,"");a2=aM.find[a1](a0,aW,a4);if(a2!=null){a3=a3.replace(aM.match[a1],"");break}}}}if(!a2){a2=aW.getElementsByTagName("*")}return{set:a2,expr:a3}};aG.filter=function(a6,a5,a9,aZ){var aY=a6,bb=[],a3=a5,a1,aW,a2=a5&&a5[0]&&aH(a5[0]);while(a6&&a5.length){for(var a4 in aM.filter){if((a1=aM.match[a4].exec(a6))!=null){var aX=aM.filter[a4],ba,a8;aW=false;if(a3===bb){bb=[]}if(aM.preFilter[a4]){a1=aM.preFilter[a4](a1,a3,a9,bb,aZ,a2);if(!a1){aW=ba=true}else{if(a1===true){continue}}}if(a1){for(var a0=0;(a8=a3[a0])!=null;a0++){if(a8){ba=aX(a8,a1,a0,a3);var a7=aZ^!!ba;if(a9&&ba!=null){if(a7){aW=true}else{a3[a0]=false}}else{if(a7){bb.push(a8);aW=true}}}}}if(ba!==k){if(!a9){a3=bb}a6=a6.replace(aM.match[a4],"");if(!aW){return[]}break}}}if(a6===aY){if(aW==null){throw"Syntax error, unrecognized expression: "+a6}else{break}}aY=a6}return a3};var aM=aG.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]*)((?:\([^\)]+\)|[^\2\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(aW){return aW.getAttribute("href")}},relative:{"+":function(a2,aX){var aZ=typeof aX==="string",a1=aZ&&!/\W/.test(aX),a3=aZ&&!a1;if(a1){aX=aX.toLowerCase()}for(var aY=0,aW=a2.length,a0;aY<aW;aY++){if((a0=a2[aY])){while((a0=a0.previousSibling)&&a0.nodeType!==1){}a2[aY]=a3||a0&&a0.nodeName.toLowerCase()===aX?a0||false:a0===aX}}if(a3){aG.filter(aX,a2,true)}},">":function(a2,aX){var a0=typeof aX==="string";if(a0&&!/\W/.test(aX)){aX=aX.toLowerCase();for(var aY=0,aW=a2.length;aY<aW;aY++){var a1=a2[aY];if(a1){var aZ=a1.parentNode;a2[aY]=aZ.nodeName.toLowerCase()===aX?aZ:false}}}else{for(var aY=0,aW=a2.length;aY<aW;aY++){var a1=a2[aY];if(a1){a2[aY]=a0?a1.parentNode:a1.parentNode===aX}}if(a0){aG.filter(aX,a2,true)}}},"":function(aZ,aX,a1){var aY=aQ++,aW=aU;if(typeof aX==="string"&&!/\W/.test(aX)){var a0=aX=aX.toLowerCase();aW=K}aW("parentNode",aX,aY,aZ,a0,a1)},"~":function(aZ,aX,a1){var aY=aQ++,aW=aU;if(typeof aX==="string"&&!/\W/.test(aX)){var a0=aX=aX.toLowerCase();aW=K}aW("previousSibling",aX,aY,aZ,a0,a1)}},find:{ID:function(aX,aY,aZ){if(typeof aY.getElementById!=="undefined"&&!aZ){var aW=aY.getElementById(aX[1]);return aW?[aW]:[]}},NAME:function(aY,a1){if(typeof a1.getElementsByName!=="undefined"){var aX=[],a0=a1.getElementsByName(aY[1]);for(var aZ=0,aW=a0.length;aZ<aW;aZ++){if(a0[aZ].getAttribute("name")===aY[1]){aX.push(a0[aZ])}}return aX.length===0?null:aX}},TAG:function(aW,aX){return aX.getElementsByTagName(aW[1])}},preFilter:{CLASS:function(aZ,aX,aY,aW,a2,a3){aZ=" "+aZ[1].replace(/\\/g,"")+" ";if(a3){return aZ}for(var a0=0,a1;(a1=aX[a0])!=null;a0++){if(a1){if(a2^(a1.className&&(" "+a1.className+" ").replace(/[\t\n]/g," ").indexOf(aZ)>=0)){if(!aY){aW.push(a1)}}else{if(aY){aX[a0]=false}}}}return false},ID:function(aW){return aW[1].replace(/\\/g,"")},TAG:function(aX,aW){return aX[1].toLowerCase()},CHILD:function(aW){if(aW[1]==="nth"){var aX=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(aW[2]==="even"&&"2n"||aW[2]==="odd"&&"2n+1"||!/\D/.test(aW[2])&&"0n+"+aW[2]||aW[2]);aW[2]=(aX[1]+(aX[2]||1))-0;aW[3]=aX[3]-0}aW[0]=aQ++;return aW},ATTR:function(a0,aX,aY,aW,a1,a2){var aZ=a0[1].replace(/\\/g,"");if(!a2&&aM.attrMap[aZ]){a0[1]=aM.attrMap[aZ]}if(a0[2]==="~="){a0[4]=" "+a0[4]+" "}return a0},PSEUDO:function(a0,aX,aY,aW,a1){if(a0[1]==="not"){if((aP.exec(a0[3])||"").length>1||/^\w/.test(a0[3])){a0[3]=aG(a0[3],null,null,aX)}else{var aZ=aG.filter(a0[3],aX,aY,true^a1);if(!aY){aW.push.apply(aW,aZ)}return false}}else{if(aM.match.POS.test(a0[0])||aM.match.CHILD.test(a0[0])){return true}}return a0},POS:function(aW){aW.unshift(true);return aW}},filters:{enabled:function(aW){return aW.disabled===false&&aW.type!=="hidden"},disabled:function(aW){return aW.disabled===true},checked:function(aW){return aW.checked===true},selected:function(aW){aW.parentNode.selectedIndex;return aW.selected===true},parent:function(aW){return!!aW.firstChild},empty:function(aW){return!aW.firstChild},has:function(aY,aX,aW){return!!aG(aW[3],aY).length},header:function(aW){return/h\d/i.test(aW.nodeName)},text:function(aW){return"text"===aW.type},radio:function(aW){return"radio"===aW.type},checkbox:function(aW){return"checkbox"===aW.type},file:function(aW){return"file"===aW.type},password:function(aW){return"password"===aW.type},submit:function(aW){return"submit"===aW.type},image:function(aW){return"image"===aW.type},reset:function(aW){return"reset"===aW.type},button:function(aW){return"button"===aW.type||aW.nodeName.toLowerCase()==="button"},input:function(aW){return/input|select|textarea|button/i.test(aW.nodeName)}},setFilters:{first:function(aX,aW){return aW===0},last:function(aY,aX,aW,aZ){return aX===aZ.length-1},even:function(aX,aW){return aW%2===0},odd:function(aX,aW){return aW%2===1},lt:function(aY,aX,aW){return aX<aW[3]-0},gt:function(aY,aX,aW){return aX>aW[3]-0},nth:function(aY,aX,aW){return aW[3]-0===aX},eq:function(aY,aX,aW){return aW[3]-0===aX}},filter:{PSEUDO:function(a2,aY,aZ,a3){var aX=aY[1],a0=aM.filters[aX];if(a0){return a0(a2,aZ,aY,a3)}else{if(aX==="contains"){return(a2.textContent||a2.innerText||S([a2])||"").indexOf(aY[3])>=0}else{if(aX==="not"){var a1=aY[3];for(var aZ=0,aW=a1.length;aZ<aW;aZ++){if(a1[aZ]===a2){return false}}return true}else{throw"Syntax error, unrecognized expression: "+aX}}}},CHILD:function(aW,aZ){var a2=aZ[1],aX=aW;switch(a2){case"only":case"first":while((aX=aX.previousSibling)){if(aX.nodeType===1){return false}}if(a2==="first"){return true}aX=aW;case"last":while((aX=aX.nextSibling)){if(aX.nodeType===1){return false}}return true;case"nth":var aY=aZ[2],a5=aZ[3];if(aY===1&&a5===0){return true}var a1=aZ[0],a4=aW.parentNode;if(a4&&(a4.sizcache!==a1||!aW.nodeIndex)){var a0=0;for(aX=a4.firstChild;aX;aX=aX.nextSibling){if(aX.nodeType===1){aX.nodeIndex=++a0}}a4.sizcache=a1}var a3=aW.nodeIndex-a5;if(aY===0){return a3===0}else{return(a3%aY===0&&a3/aY>=0)}}},ID:function(aX,aW){return aX.nodeType===1&&aX.getAttribute("id")===aW},TAG:function(aX,aW){return(aW==="*"&&aX.nodeType===1)||aX.nodeName.toLowerCase()===aW},CLASS:function(aX,aW){return(" "+(aX.className||aX.getAttribute("class"))+" ").indexOf(aW)>-1},ATTR:function(a1,aZ){var aY=aZ[1],aW=aM.attrHandle[aY]?aM.attrHandle[aY](a1):a1[aY]!=null?a1[aY]:a1.getAttribute(aY),a2=aW+"",a0=aZ[2],aX=aZ[4];return aW==null?a0==="!=":a0==="="?a2===aX:a0==="*="?a2.indexOf(aX)>=0:a0==="~="?(" "+a2+" ").indexOf(aX)>=0:!aX?a2&&aW!==false:a0==="!="?a2!==aX:a0==="^="?a2.indexOf(aX)===0:a0==="$="?a2.substr(a2.length-aX.length)===aX:a0==="|="?a2===aX||a2.substr(0,aX.length+1)===aX+"-":false},POS:function(a0,aX,aY,a1){var aW=aX[2],aZ=aM.setFilters[aW];if(aZ){return aZ(a0,aY,aX,a1)}}}};var aL=aM.match.POS;for(var aI in aM.match){aM.match[aI]=new RegExp(aM.match[aI].source+/(?![^\[]*\])(?![^\(]*\))/.source);aM.leftMatch[aI]=new RegExp(/(^(?:.|\r|\n)*?)/.source+aM.match[aI].source)}var aO=function(aX,aW){aX=Array.prototype.slice.call(aX,0);if(aW){aW.push.apply(aW,aX);return aW}return aX};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(aV){aO=function(a0,aZ){var aX=aZ||[];if(aS.call(a0)==="[object Array]"){Array.prototype.push.apply(aX,a0)}else{if(typeof a0.length==="number"){for(var aY=0,aW=a0.length;aY<aW;aY++){aX.push(a0[aY])}}else{for(var aY=0;a0[aY];aY++){aX.push(a0[aY])}}}return aX}}var aR;if(document.documentElement.compareDocumentPosition){aR=function(aX,aW){if(!aX.compareDocumentPosition||!aW.compareDocumentPosition){if(aX==aW){aK=true}return aX.compareDocumentPosition?-1:1}var aY=aX.compareDocumentPosition(aW)&4?-1:aX===aW?0:1;if(aY===0){aK=true}return aY}}else{if("sourceIndex"in document.documentElement){aR=function(aX,aW){if(!aX.sourceIndex||!aW.sourceIndex){if(aX==aW){aK=true}return aX.sourceIndex?-1:1}var aY=aX.sourceIndex-aW.sourceIndex;if(aY===0){aK=true}return aY}}else{if(document.createRange){aR=function(aZ,aX){if(!aZ.ownerDocument||!aX.ownerDocument){if(aZ==aX){aK=true}return aZ.ownerDocument?-1:1}var aY=aZ.ownerDocument.createRange(),aW=aX.ownerDocument.createRange();aY.setStart(aZ,0);aY.setEnd(aZ,0);aW.setStart(aX,0);aW.setEnd(aX,0);var a0=aY.compareBoundaryPoints(Range.START_TO_END,aW);if(a0===0){aK=true}return a0}}}}function S(aW){var aX="",aZ;for(var aY=0;aW[aY];aY++){aZ=aW[aY];if(aZ.nodeType===3||aZ.nodeType===4){aX+=aZ.nodeValue}else{if(aZ.nodeType!==8){aX+=S(aZ.childNodes)}}}return aX}(function(){var aX=document.createElement("div"),aY="script"+(new Date).getTime();aX.innerHTML="<a name='"+aY+"'/>";var aW=document.documentElement;aW.insertBefore(aX,aW.firstChild);if(document.getElementById(aY)){aM.find.ID=function(a0,a1,a2){if(typeof a1.getElementById!=="undefined"&&!a2){var aZ=a1.getElementById(a0[1]);return aZ?aZ.id===a0[1]||typeof aZ.getAttributeNode!=="undefined"&&aZ.getAttributeNode("id").nodeValue===a0[1]?[aZ]:k:[]}};aM.filter.ID=function(a1,aZ){var a0=typeof a1.getAttributeNode!=="undefined"&&a1.getAttributeNode("id");return a1.nodeType===1&&a0&&a0.nodeValue===aZ}}aW.removeChild(aX);aW=aX=null})();(function(){var aW=document.createElement("div");aW.appendChild(document.createComment(""));if(aW.getElementsByTagName("*").length>0){aM.find.TAG=function(aX,a1){var a0=a1.getElementsByTagName(aX[1]);if(aX[1]==="*"){var aZ=[];for(var aY=0;a0[aY];aY++){if(a0[aY].nodeType===1){aZ.push(a0[aY])}}a0=aZ}return a0}}aW.innerHTML="<a href='#'></a>";if(aW.firstChild&&typeof aW.firstChild.getAttribute!=="undefined"&&aW.firstChild.getAttribute("href")!=="#"){aM.attrHandle.href=function(aX){return aX.getAttribute("href",2)}}aW=null})();if(document.querySelectorAll){(function(){var aW=aG,aY=document.createElement("div");aY.innerHTML="<p class='TEST'></p>";if(aY.querySelectorAll&&aY.querySelectorAll(".TEST").length===0){return}aG=function(a2,a1,aZ,a0){a1=a1||document;if(!a0&&a1.nodeType===9&&!aH(a1)){try{return aO(a1.querySelectorAll(a2),aZ)}catch(a3){}}return aW(a2,a1,aZ,a0)};for(var aX in aW){aG[aX]=aW[aX]}aY=null})()}(function(){var aW=document.createElement("div");aW.innerHTML="<div class='test e'></div><div class='test'></div>";if(!aW.getElementsByClassName||aW.getElementsByClassName("e").length===0){return}aW.lastChild.className="e";if(aW.getElementsByClassName("e").length===1){return}aM.order.splice(1,0,"CLASS");aM.find.CLASS=function(aX,aY,aZ){if(typeof aY.getElementsByClassName!=="undefined"&&!aZ){return aY.getElementsByClassName(aX[1])}};aW=null})();function K(aX,a2,a1,a5,a3,a4){for(var aZ=0,aY=a5.length;aZ<aY;aZ++){var aW=a5[aZ];if(aW){aW=aW[aX];var a0=false;while(aW){if(aW.sizcache===a1){a0=a5[aW.sizset];break}if(aW.nodeType===1&&!a4){aW.sizcache=a1;aW.sizset=aZ}if(aW.nodeName.toLowerCase()===a2){a0=aW;break}aW=aW[aX]}a5[aZ]=a0}}}function aU(aX,a2,a1,a5,a3,a4){for(var aZ=0,aY=a5.length;aZ<aY;aZ++){var aW=a5[aZ];if(aW){aW=aW[aX];var a0=false;while(aW){if(aW.sizcache===a1){a0=a5[aW.sizset];break}if(aW.nodeType===1){if(!a4){aW.sizcache=a1;aW.sizset=aZ}if(typeof a2!=="string"){if(aW===a2){a0=true;break}}else{if(aG.filter(a2,[aW]).length>0){a0=aW;break}}}aW=aW[aX]}a5[aZ]=a0}}}var aN=document.compareDocumentPosition?function(aX,aW){return aX.compareDocumentPosition(aW)&16}:function(aX,aW){return aX!==aW&&(aX.contains?aX.contains(aW):true)};var aH=function(aW){var aX=(aW?aW.ownerDocument||aW:0).documentElement;return aX?aX.nodeName!=="HTML":false};var aT=function(aW,a3){var aZ=[],a0="",a1,aY=a3.nodeType?[a3]:a3;while((a1=aM.match.PSEUDO.exec(aW))){a0+=a1[0];aW=aW.replace(aM.match.PSEUDO,"")}aW=aM.relative[aW]?aW+"*":aW;for(var a2=0,aX=aY.length;a2<aX;a2++){aG(aW,aY[a2],aZ)}return aG.filter(a0,aZ)};return aG})();Q.lang={code:"en",of:"of",loading:"loading",cancel:"Cancel",next:"Next",previous:"Previous",play:"Play",pause:"Pause",close:"Close",errors:{single:'You must install the <a href="{0}">{1}</a> browser plugin to view this content.',shared:'You must install both the <a href="{0}">{1}</a> and <a href="{2}">{3}</a> browser plugins to view this content.',either:'You must install either the <a href="{0}">{1}</a> or the <a href="{2}">{3}</a> browser plugin to view this content.'}};var D,at="sb-drag-proxy",E,j,ag;function ax(){E={x:0,y:0,startX:null,startY:null}}function aA(){var K=Q.dimensions;aC(j.style,{height:K.innerHeight+"px",width:K.innerWidth+"px"})}function O(){ax();var K=["position:absolute","cursor:"+(Q.isGecko?"-moz-grab":"move"),"background-color:"+(Q.isIE?"#fff;filter:alpha(opacity=0)":"transparent")].join(";");Q.appendHTML(Q.skin.body,'<div id="'+at+'" style="'+K+'"></div>');j=ad(at);aA();F(j,"mousedown",L)}function B(){if(j){M(j,"mousedown",L);C(j);j=null}ag=null}function L(S){n(S);var K=V(S);E.startX=K[0];E.startY=K[1];ag=ad(Q.player.id);F(document,"mousemove",H);F(document,"mouseup",i);if(Q.isGecko){j.style.cursor="-moz-grabbing"}}function H(aI){var K=Q.player,aJ=Q.dimensions,aH=V(aI);var aG=aH[0]-E.startX;E.startX+=aG;E.x=Math.max(Math.min(0,E.x+aG),aJ.innerWidth-K.width);var S=aH[1]-E.startY;E.startY+=S;E.y=Math.max(Math.min(0,E.y+S),aJ.innerHeight-K.height);aC(ag.style,{left:E.x+"px",top:E.y+"px"})}function i(){M(document,"mousemove",H);M(document,"mouseup",i);if(Q.isGecko){j.style.cursor="-moz-grab"}}Q.img=function(S,aG){this.obj=S;this.id=aG;this.ready=false;var K=this;D=new Image();D.onload=function(){K.height=S.height?parseInt(S.height,10):D.height;K.width=S.width?parseInt(S.width,10):D.width;K.ready=true;D.onload=null;D=null};D.src=S.content};Q.img.ext=["bmp","gif","jpg","jpeg","png"];Q.img.prototype={append:function(S,aI){var aG=document.createElement("img");aG.id=this.id;aG.src=this.obj.content;aG.style.position="absolute";var K,aH;if(aI.oversized&&Q.options.handleOversize=="resize"){K=aI.innerHeight;aH=aI.innerWidth}else{K=this.height;aH=this.width}aG.setAttribute("height",K);aG.setAttribute("width",aH);S.appendChild(aG)},remove:function(){var K=ad(this.id);if(K){C(K)}B();if(D){D.onload=null;D=null}},onLoad:function(){var K=Q.dimensions;if(K.oversized&&Q.options.handleOversize=="drag"){O()}},onWindowResize:function(){var aH=Q.dimensions;switch(Q.options.handleOversize){case"resize":var K=ad(this.id);K.height=aH.innerHeight;K.width=aH.innerWidth;break;case"drag":if(ag){var aG=parseInt(Q.getStyle(ag,"top")),S=parseInt(Q.getStyle(ag,"left"));if(aG+this.height<aH.innerHeight){ag.style.top=aH.innerHeight-this.height+"px"}if(S+this.width<aH.innerWidth){ag.style.left=aH.innerWidth-this.width+"px"}aA()}break}}};var ao=false,Y=[],q=["sb-nav-close","sb-nav-next","sb-nav-play","sb-nav-pause","sb-nav-previous"],aa,ae,Z,m=true;function N(aG,aQ,aN,aL,aR){var K=(aQ=="opacity"),aM=K?Q.setOpacity:function(aS,aT){aS.style[aQ]=""+aT+"px"};if(aL==0||(!K&&!Q.options.animate)||(K&&!Q.options.animateFade)){aM(aG,aN);if(aR){aR()}return}var aO=parseFloat(Q.getStyle(aG,aQ))||0;var aP=aN-aO;if(aP==0){if(aR){aR()}return}aL*=1000;var aH=aw(),aK=Q.ease,aJ=aH+aL,aI;var S=setInterval(function(){aI=aw();if(aI>=aJ){clearInterval(S);S=null;aM(aG,aN);if(aR){aR()}}else{aM(aG,aO+aK((aI-aH)/aL)*aP)}},10)}function aB(){aa.style.height=Q.getWindowSize("Height")+"px";aa.style.width=Q.getWindowSize("Width")+"px"}function aE(){aa.style.top=document.documentElement.scrollTop+"px";aa.style.left=document.documentElement.scrollLeft+"px"}function ay(K){if(K){aF(Y,function(S,aG){aG[0].style.visibility=aG[1]||""})}else{Y=[];aF(Q.options.troubleElements,function(aG,S){aF(document.getElementsByTagName(S),function(aH,aI){Y.push([aI,aI.style.visibility]);aI.style.visibility="hidden"})})}}function r(aG,K){var S=ad("sb-nav-"+aG);if(S){S.style.display=K?"":"none"}}function ah(K,aJ){var aI=ad("sb-loading"),aG=Q.getCurrent().player,aH=(aG=="img"||aG=="html");if(K){Q.setOpacity(aI,0);aI.style.display="block";var S=function(){Q.clearOpacity(aI);if(aJ){aJ()}};if(aH){N(aI,"opacity",1,Q.options.fadeDuration,S)}else{S()}}else{var S=function(){aI.style.display="none";Q.clearOpacity(aI);if(aJ){aJ()}};if(aH){N(aI,"opacity",0,Q.options.fadeDuration,S)}else{S()}}}function t(aO){var aJ=Q.getCurrent();ad("sb-title-inner").innerHTML=aJ.title||"";var aP,aL,S,aQ,aM;if(Q.options.displayNav){aP=true;var aN=Q.gallery.length;if(aN>1){if(Q.options.continuous){aL=aM=true}else{aL=(aN-1)>Q.current;aM=Q.current>0}}if(Q.options.slideshowDelay>0&&Q.hasNext()){aQ=!Q.isPaused();S=!aQ}}else{aP=aL=S=aQ=aM=false}r("close",aP);r("next",aL);r("play",S);r("pause",aQ);r("previous",aM);var K="";if(Q.options.displayCounter&&Q.gallery.length>1){var aN=Q.gallery.length;if(Q.options.counterType=="skip"){var aI=0,aH=aN,aG=parseInt(Q.options.counterLimit)||0;if(aG<aN&&aG>2){var aK=Math.floor(aG/2);aI=Q.current-aK;if(aI<0){aI+=aN}aH=Q.current+(aG-aK);if(aH>aN){aH-=aN}}while(aI!=aH){if(aI==aN){aI=0}K+='<a onclick="Shadowbox.change('+aI+');"';if(aI==Q.current){K+=' class="sb-counter-current"'}K+=">"+(++aI)+"</a>"}}else{K=[Q.current+1,Q.lang.of,aN].join(" ")}}ad("sb-counter").innerHTML=K;aO()}function U(aH){var K=ad("sb-title-inner"),aG=ad("sb-info-inner"),S=0.35;K.style.visibility=aG.style.visibility="";if(K.innerHTML!=""){N(K,"marginTop",0,S)}N(aG,"marginTop",0,S,aH)}function av(aG,aM){var aK=ad("sb-title"),K=ad("sb-info"),aH=aK.offsetHeight,aI=K.offsetHeight,aJ=ad("sb-title-inner"),aL=ad("sb-info-inner"),S=(aG?0.35:0);N(aJ,"marginTop",aH,S);N(aL,"marginTop",aI*-1,S,function(){aJ.style.visibility=aL.style.visibility="hidden";aM()})}function ac(K,aH,S,aJ){var aI=ad("sb-wrapper-inner"),aG=(S?Q.options.resizeDuration:0);N(Z,"top",aH,aG);N(aI,"height",K,aG,aJ)}function ar(K,aH,S,aI){var aG=(S?Q.options.resizeDuration:0);N(Z,"left",aH,aG);N(Z,"width",K,aG,aI)}function ak(aM,aG){var aI=ad("sb-body-inner"),aM=parseInt(aM),aG=parseInt(aG),S=Z.offsetHeight-aI.offsetHeight,K=Z.offsetWidth-aI.offsetWidth,aK=ae.offsetHeight,aL=ae.offsetWidth,aJ=parseInt(Q.options.viewportPadding)||20,aH=(Q.player&&Q.options.handleOversize!="drag");return Q.setDimensions(aM,aG,aK,aL,S,K,aJ,aH)}var T={};T.markup='<div id="sb-container"><div id="sb-overlay"></div><div id="sb-wrapper"><div id="sb-title"><div id="sb-title-inner"></div></div><div id="sb-wrapper-inner"><div id="sb-body"><div id="sb-body-inner"></div><div id="sb-loading"><div id="sb-loading-inner"><span>{loading}</span></div></div></div></div><div id="sb-info"><div id="sb-info-inner"><div id="sb-counter"></div><div id="sb-nav"><a id="sb-nav-close" title="{close}" onclick="Shadowbox.close()"></a><a id="sb-nav-next" title="{next}" onclick="Shadowbox.next()"></a><a id="sb-nav-play" title="{play}" onclick="Shadowbox.play()"></a><a id="sb-nav-pause" title="{pause}" onclick="Shadowbox.pause()"></a><a id="sb-nav-previous" title="{previous}" onclick="Shadowbox.previous()"></a></div></div></div></div></div>';T.options={animSequence:"sync",counterLimit:10,counterType:"default",displayCounter:true,displayNav:true,fadeDuration:0.35,initialHeight:160,initialWidth:320,modal:false,overlayColor:"#000",overlayOpacity:0.5,resizeDuration:0.35,showOverlay:true,troubleElements:["select","object","embed","canvas"]};T.init=function(){Q.appendHTML(document.body,s(T.markup,Q.lang));T.body=ad("sb-body-inner");aa=ad("sb-container");ae=ad("sb-overlay");Z=ad("sb-wrapper");if(!x){aa.style.position="absolute"}if(!h){var aG,K,S=/url\("(.*\.png)"\)/;aF(q,function(aI,aJ){aG=ad(aJ);if(aG){K=Q.getStyle(aG,"backgroundImage").match(S);if(K){aG.style.backgroundImage="none";aG.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true,src="+K[1]+",sizingMethod=scale);"}}})}var aH;F(au,"resize",function(){if(aH){clearTimeout(aH);aH=null}if(A){aH=setTimeout(T.onWindowResize,10)}})};T.onOpen=function(K,aG){m=false;aa.style.display="block";aB();var S=ak(Q.options.initialHeight,Q.options.initialWidth);ac(S.innerHeight,S.top);ar(S.width,S.left);if(Q.options.showOverlay){ae.style.backgroundColor=Q.options.overlayColor;Q.setOpacity(ae,0);if(!Q.options.modal){F(ae,"click",Q.close)}ao=true}if(!x){aE();F(au,"scroll",aE)}ay();aa.style.visibility="visible";if(ao){N(ae,"opacity",Q.options.overlayOpacity,Q.options.fadeDuration,aG)}else{aG()}};T.onLoad=function(S,K){ah(true);while(T.body.firstChild){C(T.body.firstChild)}av(S,function(){if(!A){return}if(!S){Z.style.visibility="visible"}t(K)})};T.onReady=function(aH){if(!A){return}var S=Q.player,aG=ak(S.height,S.width);var K=function(){U(aH)};switch(Q.options.animSequence){case"hw":ac(aG.innerHeight,aG.top,true,function(){ar(aG.width,aG.left,true,K)});break;case"wh":ar(aG.width,aG.left,true,function(){ac(aG.innerHeight,aG.top,true,K)});break;default:ar(aG.width,aG.left,true);ac(aG.innerHeight,aG.top,true,K)}};T.onShow=function(K){ah(false,K);m=true};T.onClose=function(){if(!x){M(au,"scroll",aE)}M(ae,"click",Q.close);Z.style.visibility="hidden";var K=function(){aa.style.visibility="hidden";aa.style.display="none";ay(true)};if(ao){N(ae,"opacity",0,Q.options.fadeDuration,K)}else{K()}};T.onPlay=function(){r("play",false);r("pause",true)};T.onPause=function(){r("pause",false);r("play",true)};T.onWindowResize=function(){if(!m){return}aB();var K=Q.player,S=ak(K.height,K.width);ar(S.width,S.left);ac(S.innerHeight,S.top);if(K.onWindowResize){K.onWindowResize()}};Q.skin=T;au.Shadowbox=Q})(window);
;;;